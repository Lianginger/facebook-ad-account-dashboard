(this["webpackJsonpmixxin-dashboard"]=this["webpackJsonpmixxin-dashboard"]||[]).push([[0],{100:function(e,a,t){e.exports=t(210)},110:function(e,a,t){},111:function(e,a,t){},205:function(e,a,t){},206:function(e,a,t){},207:function(e,a,t){},210:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(96),r=t.n(l),i=t(44),o=t(35),s=t(39),d=t(30);function u(e){return{toDollar:function(){return e?"NTD ".concat(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):""},toNumber:function(){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},toProjectTime:function(){var a=e.split("T"),t=Object(d.a)(a,2),n=t[0],c=t[1];return e?"".concat(n," ").concat(c.substring(0,5)):""},toDate:function(){var a=new Date(e),t=a.getFullYear(),n=("0"+(a.getMonth()+1)).slice(-2),c=("0"+a.getDate()).slice(-2);return e?"".concat(t,"-").concat(n,"-").concat(c):""},toTime:function(){var a=new Date(e),t=("0"+a.getHours()).slice(-2),n=("0"+a.getMinutes()).slice(-2);return e?"".concat(t,":").concat(n):""}}}t(110),t(111);var m=function(e){var a=e.labelFor,t=e.isOn,n=e.handleToggle,l=e.onColor;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"switch-container"},c.a.createElement("input",{checked:t,onChange:n,className:"react-switch-checkbox",id:"react-switch-"+a,type:"checkbox"}),c.a.createElement("label",{style:{background:t&&l},className:"react-switch-label",htmlFor:"react-switch-"+a},c.a.createElement("span",{className:"react-switch-button"}))))};var p=function(){var e=Object(n.useState)([]),a=Object(d.a)(e,2),t=a[0],l=a[1],r=Object(n.useState)({}),p=Object(d.a)(r,2),f=p[0],h=p[1],v=Object(n.useState)(!0),E=Object(d.a)(v,2),g=E[0],b=E[1],_=g?t.filter((function(e){return e.adAccountLive})):t;return _=_.sort((function(e,a){return a.campaignStatus.value-e.campaignStatus.value})),Object(n.useEffect)((function(){var e=new URL(document.location).searchParams.get("p");e&&Object(i.b)("/facebook-ad-account-dashboard".concat(e))}),[]),Object(n.useEffect)((function(){window.checkLoginState=function(){window.FB?window.FB.getLoginStatus((function(e){"connected"===e.status?(h((function(e){return Object(s.a)(Object(s.a)({},e),{},{isLogin:!0})})),window.FB.api("/me?fields=name,picture{url},adaccounts.limit(1000){age,name,amount_spent,campaigns.limit(1000){status,name}}",(function(e){h((function(a){return Object(s.a)(Object(s.a)({},a),{},{name:e.name,pictureURL:e.picture.data.url})}));var a=e.adaccounts.data.sort((function(e,a){return e.age-a.age}));a=a.map((function(e){return e.adAccountLive=!1,e.campaignStatus={name:"",value:0},e.campaigns&&e.campaigns.data.forEach((function(a){"ACTIVE"===a.status&&(e.adAccountLive=!0),e.campaignStatus=function(e,a){var t=function(e){return e.includes("\u4e0a\u7dda")?{name:"\u4e0a\u7dda",value:3}:e.includes("\u9810\u71b1")?{name:"\u9810\u71b1",value:2}:e.includes("\u524d\u6e2c")?{name:"\u524d\u6e2c",value:1}:{name:"",value:0}}(a);return t.value>e.value?t:e}(e.campaignStatus,a.name)})),e})),l((function(e){return Object(o.a)(a)}))}))):console.log("Please log into this webpage.")})):console.log("FB not loaded.")},window.checkLoginState(),window.fbAsyncInit=function(){window.FB.init({appId:"2772453809519165",cookie:!0,xfbml:!0,version:"v6.0"}),window.FB.AppEvents.logPageView(),window.checkLoginState()},function(e,a,t){var n,c=e.getElementsByTagName(a)[0];e.getElementById(t)||((n=e.createElement(a)).id=t,n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=2772453809519165&autoLogAppEvents=1",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),[]),c.a.createElement("div",{className:"container my-3"},f.pictureURL?c.a.createElement("div",{className:"text-right my-3"},c.a.createElement("div",{className:"btn btn-primary",onClick:function(){return window.FB.logout((function(e){h({}),l([])}))}},c.a.createElement("div",{className:" d-flex align-items-center"},c.a.createElement("img",{src:f.pictureURL,alt:"avatar",className:"rounded-circle",style:{width:"30px"}}),c.a.createElement("span",{className:"mx-2"},"\u767b\u51fa")))):"",c.a.createElement("h1",{className:"text-center my-3"},"\u5ee3\u544a\u5e33\u865f"),c.a.createElement("div",{className:"w-100 text-center my-3"},c.a.createElement("div",{className:"fb-login-button","data-size":"large","data-button-type":"continue_with","data-layout":"default","data-auto-logout-link":"false","data-use-continue-as":"true","data-width":"","data-onlogin":"checkLoginState();","data-scope":"public_profile,email,ads_read,business_management",style:{display:f.isLogin?"none":"block"}})),_.length>0?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"d-flex align-items-center justify-content-center my-2"},c.a.createElement(m,{labelFor:"isFilter",isOn:g,handleToggle:function(){return b(!g)},onColor:"#e43f5a"}),c.a.createElement("span",null,"\u53ea\u986f\u793a Active \u5ee3\u544a\u5e33\u6236")),c.a.createElement("main",{className:"d-flex flex-wrap justify-content-center"},_.map((function(e){var a=e.name,t=e.id,n=e.adAccountLive,l=e.campaignStatus,r=e.amount_spent;return c.a.createElement("div",{key:t,className:"card m-1 ad-account-card",style:{width:"18rem",opacity:!n&&.3}},c.a.createElement("div",{className:"card-body",onClick:function(){return Object(i.b)("/facebook-ad-account-dashboard/ad-account/".concat(t))}},c.a.createElement("span",{className:"badge badge-"+(3===l.value?"success":2===l.value?"primary":1===l.value?"secondary":"")},l.name),c.a.createElement("h5",{className:"card-title"},a),c.a.createElement("p",{className:"card-text"},"\u7e3d\u5ee3\u544a\u82b1\u8cbb\uff1a",u(r).toDollar())))})))):c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))))},f=t(63),h=t(77),v=t(75);t(204);var E=function(e){return n.createElement("svg",Object.assign({width:324,height:403,viewBox:"0 0 324 403",fill:"none"},e),n.createElement("g",{clipPath:"url(#prefix__clip0)"},n.createElement("path",{d:"M236.243 182.778c4.452 10.789 3.498 23.482-3.497 33.954-11.129 16.5-33.704 20.943-50.556 9.837l-20.031-13.328-20.031-13.645c-16.534-11.106-39.109-6.664-50.556 9.837-6.995 10.154-7.949 22.847-3.497 33.636 0 0 0 .318.317.318 10.493 25.385 32.432 42.521 57.551 47.915 15.262 3.174 31.478 2.222 47.058-4.125 5.087-2.221 9.857-4.76 14.308-7.616 30.524-20.943 43.56-60.926 28.934-96.783z",fill:"url(#prefix__paint0_radial)"}),n.createElement("path",{d:"M161.841 302.726c-22.893 0-46.104-8.885-63.592-26.338-16.852-16.818-26.39-39.348-26.39-63.464 0-23.8 9.22-46.33 26.39-63.465 3.816-3.808 9.857-3.808 13.672 0 3.816 3.808 3.816 9.837 0 13.645-13.354 13.327-20.667 30.78-20.667 49.502s7.313 36.492 20.667 49.503c27.345 27.289 71.859 27.289 99.522 0 27.344-27.29 27.344-71.715 0-99.322l-56.279-55.532c-3.816-3.808-3.816-9.837 0-13.645 3.815-3.808 9.857-3.808 13.672 0l56.597 56.484c34.975 34.905 34.975 91.706 0 126.611-17.488 17.453-40.381 26.021-63.592 26.021z",fill:"#0A2240"}),n.createElement("path",{d:"M162.477 255.445c-5.405 0-9.857-4.443-9.857-9.837v-82.504l-41.334-41.252c-27.98-27.924-27.98-72.984 0-100.909C124.64 7.298 142.763 0 161.841 0s37.201 7.298 50.555 20.943c13.037 13.01 20.668 30.463 20.986 48.868v.317c0 14.28-3.18 26.973-9.857 37.444v.318c-2.862 4.442-8.903 6.029-13.354 3.173-4.452-2.856-6.041-8.885-3.18-13.328v-.317c4.452-7.298 6.995-16.5 6.995-26.972-.318-13.328-5.723-26.02-15.262-35.54-9.856-9.837-22.893-15.232-36.883-15.232-13.99 0-27.026 5.395-36.883 15.232-20.032 19.99-20.032 52.992 0 72.984l44.514 44.425c1.908 1.904 2.862 4.442 2.862 6.981v86.629c0 5.077-4.452 9.52-9.857 9.52zM27.98 156.123c2.544 2.538 3.816 6.664 3.816 12.375v36.81c0 4.125 2.226 6.664 6.041 6.664h3.498c4.133 0 7.63 2.221 7.63 7.615 0 5.395-3.497 7.616-7.63 7.616H32.75c-10.493 0-18.442-6.346-18.442-19.039v-38.079c0-4.76-1.272-7.616-2.861-9.202-1.59-1.587-3.498-1.904-5.406-2.222-4.451-.634-6.359-3.173-6.359-7.615 0-4.443 1.908-6.664 6.36-7.616 1.907-.317 4.133-.952 5.723-2.539 1.59-1.586 2.543-4.125 2.543-8.567v-38.08c0-12.692 7.95-19.038 18.442-19.038h8.585c4.133 0 7.63 2.22 7.63 7.615s-3.497 7.616-7.63 7.616h-3.18c-3.816 0-6.041 2.539-6.041 6.664v36.809c0 5.712-1.59 9.52-3.816 12.059-2.543 2.855-6.04 4.442-8.585 4.442v.317c2.544 1.27 6.042 2.539 8.267 5.395zM304.287 151.363c-2.544-.317-6.042-1.587-8.585-4.443-2.226-2.538-3.816-6.663-3.816-12.058V97.735c0-4.125-2.226-6.663-6.041-6.663h-3.498c-4.133 0-7.631-2.222-7.631-7.616 0-5.395 3.498-7.616 7.631-7.616h8.585c10.493 0 18.442 6.347 18.442 19.04v38.078c0 4.443.954 7.299 2.544 8.568 1.589 1.587 3.497 2.221 5.723 2.539 4.451.952 6.359 3.173 6.359 7.615 0 4.443-1.908 6.981-6.359 7.616-1.908.317-3.816.635-5.405 2.221-1.59 1.587-2.862 4.126-2.862 9.203v38.078c0 12.693-7.949 19.04-18.442 19.04h-8.585c-4.133 0-7.631-2.221-7.631-7.616 0-5.394 3.498-7.616 7.631-7.616h3.498c3.815 0 6.041-2.538 6.041-6.663v-37.445c0-5.711 1.59-9.519 3.816-12.058 2.543-3.173 6.041-4.442 8.585-5.077zM54.371 388.403c0 8.885-8.267 14.597-20.35 14.597-9.538 0-16.215-3.173-18.759-9.202-1.272-3.174.954-6.347 4.451-6.347h.636c1.908 0 3.816.952 4.452 2.856 1.272 2.856 4.451 4.443 9.857 4.443 6.04 0 9.538-2.222 9.538-6.03 0-11.74-28.934-2.538-28.934-22.847 0-8.567 7.949-14.597 19.395-14.597 8.903 0 15.263 3.174 17.806 8.885 1.272 3.174-.954 6.347-4.451 6.347h-.636c-1.908 0-3.816-.952-4.452-2.856-1.271-2.856-4.133-4.125-8.584-4.125-6.042 0-8.903 2.221-8.903 5.712 0 11.423 28.934 2.221 28.934 23.164zM84.26 384.278v13.328c0 2.538-2.227 4.759-4.77 4.759h-.954c-2.544 0-4.77-2.221-4.77-4.759v-13.645c0-.952-.318-1.587-.636-2.222l-13.036-23.164c-1.907-3.173.636-6.981 4.134-6.981 1.59 0 3.18.952 4.133 2.538l10.81 19.674 10.493-19.674c.954-1.586 2.544-2.538 4.134-2.538 3.497 0 5.723 3.808 4.133 6.981l-13.354 23.482c-.318.634-.318 1.586-.318 2.221zM123.05 379.835c0-2.221 1.908-4.125 4.134-4.125h1.589c5.088 0 7.949-3.173 7.949-7.933 0-4.442-2.861-7.616-7.949-7.616h-6.041c-2.544 0-4.769 2.222-4.769 4.76v33.002c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-38.714c0-4.125 3.498-7.615 7.631-7.615h13.354c11.447 0 18.442 5.712 18.442 16.183 0 10.472-6.995 16.184-18.442 16.184h-1.589c-1.908 0-3.816-1.904-3.816-4.126zM197.77 356.354v41.569c0 2.538-2.225 4.76-4.769 4.76h-.954c-2.544 0-4.769-2.222-4.769-4.76v-16.818h-22.575v16.818c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.226-4.76 4.769-4.76h.954c2.544 0 4.77 2.221 4.77 4.76v15.866h22.893v-15.866c0-2.539 2.225-4.76 4.769-4.76h.954c2.226 0 4.451 2.221 4.451 4.76zM206.673 377.297c0-15.866 10.811-26.021 25.437-26.021 14.626 0 25.437 9.837 25.437 25.704 0 16.183-10.811 26.02-25.437 26.02-14.626 0-25.437-9.837-25.437-25.703zm40.381-.317c0-10.789-6.677-17.136-14.944-17.136-8.267 0-14.944 6.347-14.944 17.136 0 10.789 6.677 17.135 14.944 17.135 8.267 0 14.944-6.346 14.944-17.135zM309.056 356.354v41.569c0 2.538-2.226 4.76-4.769 4.76h-2.226c-1.59 0-3.18-.952-3.816-2.222l-21.939-33.318v30.78c0 2.538-2.226 4.76-4.769 4.76h-.636c-2.544 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.225-4.76 4.769-4.76h2.226c1.589 0 3.179.952 3.815 2.221l21.939 33.636v-30.78c0-2.539 2.226-4.76 4.77-4.76h.636c2.861-.317 4.769 1.904 4.769 4.443z",fill:"#0A2240"})),n.createElement("defs",null,n.createElement("radialGradient",{id:"prefix__paint0_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(128.005 0 0 127.749 161.502 161.916)"},n.createElement("stop",{stopColor:"#FFB819"}),n.createElement("stop",{offset:1,stopColor:"#FF48CC"})),n.createElement("clipPath",{id:"prefix__clip0"},n.createElement("path",{fill:"#fff",d:"M0 0h324v403H0z"}))))};var g=function(e){return n.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.707 5.707a1 1 0 00-1.414-1.414l-7 7a1 1 0 000 1.414l7 7a1 1 0 001.414-1.414L7.414 13H19a1 1 0 100-2H7.414l5.293-5.293z"}))},b=(t(205),function(e){var a=e.title;return c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__line-left"},c.a.createElement("div",{className:"header__back-to-home",onClick:function(){return Object(i.b)("/facebook-ad-account-dashboard/")}},c.a.createElement(g,{className:"header__arrow-left"}),c.a.createElement("span",{className:"header__back-to-home-text"},"Home")),c.a.createElement("div",{className:"header__title"},a)),c.a.createElement(E,{className:"header__logo"}),c.a.createElement("div",{className:"header__line-right"}))}),_=(t(206),function(e){var a=e.project,t=e.adAccount,l=Object(n.useState)(""),r=Object(d.a)(l,2),i=r[0],o=r[1];if(!a.id)return null;var s=Number(a.funding_current.replace(/NTD /g,"").replace(/,/g,"")),m=Number(a.funding_target.replace(/NTD /g,"").replace(/,/g,"")),p=Math.floor(s/m*100),f=Number(t.leadSpendTotal/t.leadTotal).toFixed(1),h=u(t.leadSpendTotal+t.preLaunchSpendTotal+t.fundRaisingSpendTotal).toDollar();return setInterval((function(){var e=new Date(a.finished_at).getTime()-(new Date).getTime(),t=Math.floor(e/864e5),n=Math.floor(e%864e5/36e5),c=Math.floor(e%36e5/6e4),l=Math.floor(e%6e4/1e3);o("".concat(t," \u65e5 ").concat(n," \u6642 ").concat(c," \u5206 ").concat(l," \u79d2"))}),1e3),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4 project__image"},c.a.createElement("div",{style:{backgroundImage:"url(".concat(a.og_image,")")}})),c.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4 project__content"},c.a.createElement("div",{className:"project__content-title"},c.a.createElement("a",{href:"https://www.zeczec.com/projects/"+t.projectId,target:"blank"},a.name)),c.a.createElement("h2",{className:"project__content-funding-current"},a.funding_current),c.a.createElement("div",{className:"project__content-info"},c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u76ee\u6a19"),c.a.createElement("div",{className:"list__value"},a.funding_target)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u9054\u6210\u6bd4\u4f8b"),c.a.createElement("div",{className:"list__value"},u(p).toNumber(),"%")),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u8d0a\u52a9\u4eba\u6578"),c.a.createElement("div",{className:"list__value"},a.sponsor_count)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u6642\u7a0b"),c.a.createElement("div",{className:"list__value"},a.started_at," ~ ",a.finished_at)))),c.a.createElement("div",{className:"col-12 col-lg-4 project__ad-stats row"},c.a.createElement("div",{className:"col-6 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5e73\u5747 CPL"),c.a.createElement("div",{className:"ad-stats__value"},f)),c.a.createElement("div",{className:"col-6 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u82b1\u8cbb"),c.a.createElement("div",{className:"ad-stats__value"},h)),c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5012\u6578"),c.a.createElement("div",{className:"ad-stats__value"},i))))});t(207);var y=function(e){var a=e.adAccountId,t=Object(n.useState)(!0),l=Object(d.a)(t,2),r=l[0],i=l[1],m=Object(h.a)({name:"",platformId:"",projectId:"",data:[],dateArray:[],leadSpendTotal:0,leadSpendDaily:[],leadTotal:0,leadDaily:[],costPerLeadDaily:[],preLaunchSpendTotal:0,preLaunchSpendDaily:[],fundRaisingSpendTotal:0,fundRaisingSpendDaily:[],adsDirectFundRaisingTotal:0,adsDirectFundRaisingDaily:[],adsDirectRoasDaily:[],fundRaisingTotal:0,fundRaisingDaily:[],orderCountTotal:0,orderCountDaily:[],totalRoasDaily:[]}),p=Object(d.a)(m,2),E=p[0],g=p[1],y=Object(h.a)({started_at:void 0,fundRaisingDateMap:void 0,orderCountDateMap:void 0}),D=Object(d.a)(y,2),j=D[0],N=D[1],S={maintainAspectRatio:!1,hover:{intersect:!1},tooltips:{mode:"index",intersect:!1},scales:{yAxes:[{type:"linear",display:!0,position:"left",id:"y-axis-1",gridLines:{drawOnChartArea:!1},scaleLabel:{display:!0,labelString:"\u540d\u55ae\u53d6\u5f97\u6210\u672c"}},{type:"linear",display:!0,position:"right",id:"y-axis-2",scaleLabel:{display:!0,labelString:"ROAS"}}]},plugins:{datalabels:{color:"black",align:"top",offset:8}}},x={labels:j.projectStartIndex?Object(o.a)(E.dateArray).reverse().slice(0,j.projectStartIndex+1):Object(o.a)(E.dateArray).reverse(),datasets:[{label:"CPL",fill:!1,borderColor:"#1f4068",pointBackgroundColor:"#1f4068",pointHoverBackgroundColor:"#1f4068",data:j.projectStartIndex?Object(o.a)(E.costPerLeadDaily).reverse().slice(0,j.projectStartIndex+1):Object(o.a)(E.costPerLeadDaily).reverse(),yAxisID:"y-axis-1"}]},O={labels:j.projectStartIndex?Object(o.a)(E.dateArray).reverse().slice(j.projectStartIndex):[],datasets:[{label:"\u7e3d\u9ad4 ROAS",fill:!1,borderColor:"#e43f5a",pointBackgroundColor:"#e43f5a",pointHoverBackgroundColor:"#e43f5a",data:j.projectStartIndex?Object(o.a)(E.totalRoasDaily).reverse().slice(j.projectStartIndex):[],yAxisID:"y-axis-2"}]};return Object(n.useEffect)((function(){fetch("https://fb-ads-api.herokuapp.com/ad-account/info/".concat(a)).then((function(e){return e.json()})).then((function(e){g((function(a){a.name=e.name,a.platformId=e.business_street,a.projectId=e.business_street2}))})),i(!0),fetch("https://fb-ads-api.herokuapp.com/ad-account/insights/".concat(a)).then((function(e){return e.json()})).then((function(e){g((function(a){a.data=function(e){var a={};return e.forEach((function(e){var t=e.date_start,n=function(e){return e.campaign_name.includes("\u9810\u71b1")?"\u9810\u71b1":e.campaign_name.includes("\u524d\u6e2c")?"\u524d\u6e2c":e.campaign_name.includes("\u4e0a\u7dda")?"\u4e0a\u7dda":"none"}(e);a[t]?a[t][n]?a[t][n].push(e):a[t][n]=[e]:a[t]=Object(f.a)({},n,[e])})),a}(e.data)})),i(!1)}))}),[a,g]),Object(n.useEffect)((function(){!function(){var e=Object.keys(E.data),a=0,t=[],n=0,c=[],l=[],r=0,i=[],o=0,s=[],d=0,u=[],m=[];Object.values(E.data).forEach((function(e){if(e["\u9810\u71b1"]){var p=e["\u9810\u71b1"],f=0;p.forEach((function(e){if(0!==parseInt(e.spend)){var a=parseInt(e.spend);f+=a}})),0!==f?(r+=f,i.push(f)):i.push(null)}else i.push(null);if(e["\u524d\u6e2c"]){var h=e["\u524d\u6e2c"],v=0,E=0;h.forEach((function(e){if(0!==parseInt(e.spend)&&e.actions){var a=parseInt(e.spend),t=e.actions.find((function(e){return"offsite_conversion.fb_pixel_custom"===e.action_type||"lead"===e.action_type}));v+=a,E+=t?parseInt(t.value):0}})),0!==v&&0!==E?(a+=v,t.push(v),n+=E,c.push(E),l.push((v/E).toFixed(1))):(t.push(null),c.push(null),l.push(null))}else t.push(null),c.push(null),l.push(null);if(e["\u4e0a\u7dda"]){var g=e["\u4e0a\u7dda"],b=0,_=0;g.forEach((function(e){if(0!==parseInt(e.spend)&&e.action_values){var a=parseInt(e.spend),t=e.action_values.find((function(e){return"omni_purchase"===e.action_type}));b+=a,_+=t?parseInt(t.value):0}})),0!==b&&0!==_?(o+=b,s.push(b),d+=_,u.push(_),m.push((_/b).toFixed(1))):(s.push(null),u.push(null),m.push(null))}else s.push(null),u.push(null),m.push(null)})),g((function(p){p.dateArray=e,p.leadSpendTotal=a,p.leadSpendDaily=t,p.leadTotal=n,p.leadDaily=c,p.costPerLeadDaily=l,p.preLaunchSpendTotal=r,p.preLaunchSpendDaily=i,p.fundRaisingSpendTotal=o,p.fundRaisingSpendDaily=s,p.adsDirectFundRaisingTotal=d,p.adsDirectFundRaisingDaily=u,p.adsDirectRoasDaily=m}))}()}),[E.data,g]),Object(n.useEffect)((function(){var e=E.platformId,a=E.projectId;e&&a&&function(e,a){fetch("https://drip.zectrack.today/api/platform/".concat(e,"/projects/").concat(a)).then((function(e){return e.json()})).then((function(e){N((function(a){return Object(s.a)(Object(s.a)(Object(s.a)({},a),e),{},{timeline:JSON.parse(e.timeline).sort((function(e,a){return e[0]-a[0]})),sponsor_count:u(e.sponsor_count).toNumber(),funding_target:u(e.funding_target).toDollar(),funding_current:u(e.funding_current).toDollar(),started_at:u(e.started_at).toProjectTime(),finished_at:u(e.finished_at).toProjectTime()})}))}))}(e,a)}),[E.platformId,E.projectId,N]),Object(n.useEffect)((function(){if(j.timeline){var e=j.started_at.slice(0,10),a=Object(o.a)(E.dateArray).reverse().findIndex((function(a){return a===e})),t=new Date(j.started_at.slice(0,-1)).getTime()/1e3,n=new Date(j.finished_at.slice(0,-1)).getTime()/1e3;t-=3600;var c={};j.timeline.forEach((function(e){if(!(e[0]<t||e[0]>n)){var a=u(1e3*e[0]).toDate(),l=[u(1e3*e[0]).toTime(),e[1],e[2]];c[a]?c[a].push(l):c[a]=[l]}}));for(var l={},r={},i=0,s=0,m=0,p=Object.entries(c);m<p.length;m++){var f=Object(d.a)(p[m],2),h=f[0],v=f[1],g=v[v.length-1][2],b=v[v.length-1][1];l[h]=g-i,r[h]=b-s,i=g,s=b}N((function(e){e.fundRaisingDateMap=l,e.orderCountDateMap=r,e.projectStartIndex=a}))}}),[j.timeline,j.started_at,j.finished_at,N,E.dateArray]),Object(n.useEffect)((function(){if(j.fundRaisingDateMap&&E.fundRaisingSpendDaily.length>0){var e=0,a=[],t=0,n=[],c=[];E.dateArray.forEach((function(l,r){j.fundRaisingDateMap[l]&&j.orderCountDateMap[l]&&E.fundRaisingSpendDaily[r]?(e+=j.fundRaisingDateMap[l],a.push(j.fundRaisingDateMap[l]),t+=j.orderCountDateMap[l],n.push(j.orderCountDateMap[l]),c.push((j.fundRaisingDateMap[l]/E.fundRaisingSpendDaily[r]).toFixed(1))):(n.push(null),a.push(null),c.push(null))})),g((function(l){l.fundRaisingTotal=e,l.fundRaisingDaily=a,l.orderCountTotal=t,l.orderCountDaily=n,l.totalRoasDaily=c}))}}),[j.fundRaisingDateMap,j.orderCountDateMap,E.fundRaisingSpendDaily,E.dateArray,g]),c.a.createElement("div",{className:"container my-3"},c.a.createElement(b,{title:E.name}),r?c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))):c.a.createElement(c.a.Fragment,null,c.a.createElement(_,{project:j,adAccount:E}),j.id&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"my-5",style:{height:"300px"}},c.a.createElement(v.a,{data:O,options:S})),c.a.createElement("div",{className:"table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Date"),c.a.createElement("th",{scope:"col"},"\u4e0a\u7dda\u82b1\u8cbb"),c.a.createElement("th",{scope:"col"},"\u5ee3\u544a\u76f4\u63a5\u8f49\u63db\u91d1\u984d"),c.a.createElement("th",{scope:"col"},"\u5ee3\u544a\u76f4\u63a5 ROAS"),c.a.createElement("th",{scope:"col"},"\u6bcf\u65e5\u8a02\u55ae\u6578"),c.a.createElement("th",{scope:"col"},"\u6bcf\u65e5\u96c6\u8cc7\u91d1\u984d"),c.a.createElement("th",{scope:"col"},"\u7e3d\u9ad4 ROAS")),c.a.createElement("tr",null,c.a.createElement("td",null,"\u7e3d\u8a08"),c.a.createElement("td",null,u(E.fundRaisingSpendTotal).toDollar()),c.a.createElement("td",null,u(E.adsDirectFundRaisingTotal).toDollar()),c.a.createElement("td",null,(E.adsDirectFundRaisingTotal/E.fundRaisingSpendTotal).toFixed(1)),c.a.createElement("td",null,u(E.orderCountTotal).toNumber()),c.a.createElement("td",null,u(E.fundRaisingTotal).toDollar()),c.a.createElement("td",null,(E.fundRaisingTotal/E.fundRaisingSpendTotal).toFixed(1)))),c.a.createElement("tbody",null,E.dateArray.map((function(e,a){return a>E.dateArray.length-j.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(a)},c.a.createElement("th",null,e),c.a.createElement("td",null,u(E.fundRaisingSpendDaily[a]).toDollar()),c.a.createElement("td",null,u(E.adsDirectFundRaisingDaily[a]).toDollar()),c.a.createElement("td",null,E.adsDirectRoasDaily[a]),c.a.createElement("td",null,E.orderCountDaily[a]),c.a.createElement("td",null,u(E.fundRaisingDaily[a]).toDollar()),c.a.createElement("td",null,E.totalRoasDaily[a]))}))))))),c.a.createElement("div",{className:"my-5",style:{height:"300px"}},c.a.createElement(v.a,{data:x,options:S})),c.a.createElement("div",{className:"table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("th",{scope:"col"},"Date"),c.a.createElement("th",{scope:"col"},"\u524d\u6e2c\u82b1\u8cbb"),c.a.createElement("th",{scope:"col"},"\u540d\u55ae\u6578"),c.a.createElement("th",{scope:"col"},"CPL"),c.a.createElement("th",{scope:"col"},"\u9810\u71b1\u82b1\u8cbb")),c.a.createElement("tr",null,c.a.createElement("td",null,"\u7e3d\u8a08"),c.a.createElement("td",null,u(E.leadSpendTotal).toDollar()),c.a.createElement("td",null,u(E.leadTotal).toNumber()),c.a.createElement("td",null,(E.leadSpendTotal/E.leadTotal).toFixed(1)),c.a.createElement("td",null,u(E.preLaunchSpendTotal).toDollar()))),c.a.createElement("tbody",null,E.dateArray.map((function(e,a){return a<E.dateArray.length-j.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(a)},c.a.createElement("th",null,e),c.a.createElement("td",null,u(E.leadSpendDaily[a]).toDollar()),c.a.createElement("td",null,u(E.leadDaily[a]).toNumber()),c.a.createElement("td",null,u(E.costPerLeadDaily[a]).toDollar()),c.a.createElement("td",null,u(E.preLaunchSpendDaily[a]).toDollar()))}))))))))},D=function(){return c.a.createElement(i.a,{basepath:"/facebook-ad-account-dashboard",primary:!1},c.a.createElement(p,{path:"/"}),c.a.createElement(y,{path:"/ad-account/:adAccountId"}))};t(208);r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(D,null)),document.getElementById("root"))}},[[100,1,2]]]);
//# sourceMappingURL=main.88a1d09e.chunk.js.map