(this["webpackJsonpmixxin-dashboard"]=this["webpackJsonpmixxin-dashboard"]||[]).push([[0],{200:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(90),c=a.n(r),l=a(43),i=a(53),s=a(40);var d=function(){var e=Object(n.useState)([]),t=Object(s.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({}),d=Object(s.a)(c,2),u=d[0],m=d[1];return Object(n.useEffect)((function(){window.checkLoginState=function(){window.FB?window.FB.getLoginStatus((function(e){console.log(e),"connected"===e.status?(m((function(e){return Object(i.a)(Object(i.a)({},e),{},{isLogin:!0})})),console.log("fetchUserAndAdAccounts"),window.FB.api("/me?fields=name,picture{url},adaccounts{name,account_id,age}",(function(e){m((function(t){return Object(i.a)(Object(i.a)({},t),{},{name:e.name,pictureURL:e.picture.data.url})})),r(e.adaccounts.data)}))):console.log("Please log into this webpage.")})):console.log("FB not loaded.")},window.checkLoginState(),window.fbAsyncInit=function(){window.FB.init({appId:"2772453809519165",cookie:!0,xfbml:!0,version:"v6.0"}),window.FB.AppEvents.logPageView(),window.checkLoginState()},function(e,t,a){var n,o=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=2772453809519165&autoLogAppEvents=1",o.parentNode.insertBefore(n,o))}(document,"script","facebook-jssdk")}),[]),o.a.createElement("div",{className:"container my-3"},u.pictureURL?o.a.createElement("div",{className:"text-right my-3"},o.a.createElement("div",{className:"btn btn-primary",onClick:function(){return window.FB.logout((function(e){m({}),r([])}))}},o.a.createElement("div",{className:" d-flex align-items-center"},o.a.createElement("img",{src:u.pictureURL,alt:"avatar",className:"rounded-circle",style:{width:"30px"}}),o.a.createElement("span",{className:"mx-2"},"\u767b\u51fa")))):"",o.a.createElement("h1",{className:"text-center my-3"},"\u5ee3\u544a\u5e33\u865f"),o.a.createElement("div",{className:"w-100 text-center my-3"},o.a.createElement("div",{className:"fb-login-button","data-size":"large","data-button-type":"continue_with","data-layout":"default","data-auto-logout-link":"false","data-use-continue-as":"true","data-width":"","data-onlogin":"checkLoginState();","data-scope":"public_profile,email,ads_read,business_management",style:{display:u.isLogin?"none":"block"}})),o.a.createElement("main",{className:"col-12 col-md-6 m-auto"},a.length>0?o.a.createElement("div",{className:"list-group"},a.map((function(e){var t=e.name,a=e.id;return o.a.createElement("button",{key:a,type:"button",className:"list-group-item list-group-item-action",onClick:function(){return Object(l.b)("/ad-account/".concat(a))}},t)}))):""))},u=a(95),m=a(92);var p=function(e){var t=e.adAccountId,a=Object(n.useState)(!0),r=Object(s.a)(a,2),c=r[0],i=r[1],d=Object(u.a)({data:[]}),p=Object(s.a)(d,2),b=p[0],f=p[1],g=Object(n.useState)({}),v=Object(s.a)(g,2),E=v[0],h=v[1],y={labels:b.data.map((function(e){return e.date_start})).reverse(),datasets:[{label:"ROAS",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:b.data.map((function(e){var t=e.purchase_roas;return t?t[0].value:null})).reverse()},{label:"CPL",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"#666",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"#666",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"#666",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:b.data.map((function(e){var t=e.cost_per_action_type.find((function(e){return"offsite_conversion.fb_pixel_custom"===e.action_type}));return t?t.value:null})).reverse()}]};return Object(n.useEffect)((function(){w()}),[t]),o.a.createElement("div",{className:"container my-3"},c?o.a.createElement("div",{className:"text-center my-5"},o.a.createElement("div",{className:"spinner-border text-primary",role:"status"},o.a.createElement("span",{className:"sr-only"},"Loading..."))):o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"btn btn-primary",onClick:function(){return Object(l.b)("/")}},"Home"),o.a.createElement("h1",{className:"text-center my-3"},b.name),o.a.createElement("div",{className:"my-2",style:{height:"200px"}},o.a.createElement(m.a,{data:y,options:{maintainAspectRatio:!1}})),t?o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{scope:"col"},"Date"),o.a.createElement("th",{scope:"col"},"Spend"),o.a.createElement("th",{scope:"col"},"CPC"),o.a.createElement("th",{scope:"col"},"CPL"),o.a.createElement("th",{scope:"col"},"ROAS"))),o.a.createElement("tbody",null,b.data.map((function(e,t){var a=e.cpc,n=e.spend,r=e.date_start,c=e.purchase_roas,l=e.cost_per_action_type.find((function(e){return"offsite_conversion.fb_pixel_custom"===e.action_type}));return o.a.createElement("tr",{key:"daily-adAccount-data-".concat(t)},o.a.createElement("th",null,r),o.a.createElement("td",null,n),o.a.createElement("td",null,a),o.a.createElement("td",null,l?l.value:null),o.a.createElement("td",null,c?c[0].value:""))})))):"",o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-6 text-left"},E.hasPrevious?o.a.createElement("div",{className:"btn btn-primary",onClick:function(){return w("before",E.cursors.before)}},"Previous"):""),o.a.createElement("div",{className:"col-6 text-right"},E.hasNext?o.a.createElement("div",{className:"btn btn-primary",onClick:function(){return w("after",E.cursors.after)}},"Next"):""))));function w(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";i(!0),fetch("http://localhost:8000/ad-account/".concat(t,"?").concat(e,"=").concat(a)).then((function(e){return e.json()})).then((function(e){console.log(e),f((function(t){t.data=e.data,t.name=e.data[0].account_name})),h(e.paging),i(!1)}))}},b=function(){return o.a.createElement(l.a,{primary:!1},o.a.createElement(d,{path:"/"}),o.a.createElement(p,{path:"/ad-account/:adAccountId"}))};a(198);c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(b,null)),document.getElementById("root"))},96:function(e,t,a){e.exports=a(200)}},[[96,1,2]]]);
//# sourceMappingURL=main.4555346b.chunk.js.map