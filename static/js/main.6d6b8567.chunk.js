(this["webpackJsonpmixxin-dashboard"]=this["webpackJsonpmixxin-dashboard"]||[]).push([[0],{117:function(e,a,t){e.exports=t(228)},128:function(e,a,t){},129:function(e,a,t){},130:function(e,a,t){},131:function(e,a,t){},224:function(e,a,t){},228:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(72),r=t.n(l),s=t(53),i=t(39),o=t(37),d=t(55),u=t(21);function m(e){return{toDollar:function(){return e?"$ ".concat(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):""},toNumber:function(){return e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},toProjectTime:function(){var a=e.split("T"),t=Object(o.a)(a,2),n=t[0],c=t[1];return e?"".concat(n," ").concat(c.substring(0,5)):""},toPercentage:function(){return e?"".concat(Number(100*e).toFixed(1)," %"):""},toDate:function(){var a=new Date(e),t=a.getFullYear(),n=("0"+(a.getMonth()+1)).slice(-2),c=("0"+a.getDate()).slice(-2);return e?"".concat(t,"-").concat(n,"-").concat(c):""},toTime:function(){var a=new Date(e),t=("0"+a.getHours()).slice(-2),n=("0"+a.getMinutes()).slice(-2);return e?"".concat(t,":").concat(n):""}}}t(128),t(129);var p=function(e){var a=e.labelFor,t=e.isOn,n=e.handleToggle,l=e.onColor;e.title;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"switch-container"},c.a.createElement("input",{checked:t,onChange:n,className:"react-switch-checkbox",id:"react-switch-"+a,type:"checkbox"}),c.a.createElement("label",{style:{background:t&&l},className:"react-switch-label",htmlFor:"react-switch-"+a},c.a.createElement("span",{className:"react-switch-button"})),c.a.createElement("span",null,"\u53ea\u986f\u793a\u6d3b\u8e8d\u5ee3\u544a\u5e33\u6236")))};var f=function(e){return n.createElement("svg",Object.assign({width:324,height:403,viewBox:"0 0 324 403",fill:"none"},e),n.createElement("g",{clipPath:"url(#prefix__clip0)"},n.createElement("path",{d:"M236.243 182.778c4.452 10.789 3.498 23.482-3.497 33.954-11.129 16.5-33.704 20.943-50.556 9.837l-20.031-13.328-20.031-13.645c-16.534-11.106-39.109-6.664-50.556 9.837-6.995 10.154-7.949 22.847-3.497 33.636 0 0 0 .318.317.318 10.493 25.385 32.432 42.521 57.551 47.915 15.262 3.174 31.478 2.222 47.058-4.125 5.087-2.221 9.857-4.76 14.308-7.616 30.524-20.943 43.56-60.926 28.934-96.783z",fill:"url(#prefix__paint0_radial)"}),n.createElement("path",{d:"M161.841 302.726c-22.893 0-46.104-8.885-63.592-26.338-16.852-16.818-26.39-39.348-26.39-63.464 0-23.8 9.22-46.33 26.39-63.465 3.816-3.808 9.857-3.808 13.672 0 3.816 3.808 3.816 9.837 0 13.645-13.354 13.327-20.667 30.78-20.667 49.502s7.313 36.492 20.667 49.503c27.345 27.289 71.859 27.289 99.522 0 27.344-27.29 27.344-71.715 0-99.322l-56.279-55.532c-3.816-3.808-3.816-9.837 0-13.645 3.815-3.808 9.857-3.808 13.672 0l56.597 56.484c34.975 34.905 34.975 91.706 0 126.611-17.488 17.453-40.381 26.021-63.592 26.021z",fill:"#0A2240"}),n.createElement("path",{d:"M162.477 255.445c-5.405 0-9.857-4.443-9.857-9.837v-82.504l-41.334-41.252c-27.98-27.924-27.98-72.984 0-100.909C124.64 7.298 142.763 0 161.841 0s37.201 7.298 50.555 20.943c13.037 13.01 20.668 30.463 20.986 48.868v.317c0 14.28-3.18 26.973-9.857 37.444v.318c-2.862 4.442-8.903 6.029-13.354 3.173-4.452-2.856-6.041-8.885-3.18-13.328v-.317c4.452-7.298 6.995-16.5 6.995-26.972-.318-13.328-5.723-26.02-15.262-35.54-9.856-9.837-22.893-15.232-36.883-15.232-13.99 0-27.026 5.395-36.883 15.232-20.032 19.99-20.032 52.992 0 72.984l44.514 44.425c1.908 1.904 2.862 4.442 2.862 6.981v86.629c0 5.077-4.452 9.52-9.857 9.52zM27.98 156.123c2.544 2.538 3.816 6.664 3.816 12.375v36.81c0 4.125 2.226 6.664 6.041 6.664h3.498c4.133 0 7.63 2.221 7.63 7.615 0 5.395-3.497 7.616-7.63 7.616H32.75c-10.493 0-18.442-6.346-18.442-19.039v-38.079c0-4.76-1.272-7.616-2.861-9.202-1.59-1.587-3.498-1.904-5.406-2.222-4.451-.634-6.359-3.173-6.359-7.615 0-4.443 1.908-6.664 6.36-7.616 1.907-.317 4.133-.952 5.723-2.539 1.59-1.586 2.543-4.125 2.543-8.567v-38.08c0-12.692 7.95-19.038 18.442-19.038h8.585c4.133 0 7.63 2.22 7.63 7.615s-3.497 7.616-7.63 7.616h-3.18c-3.816 0-6.041 2.539-6.041 6.664v36.809c0 5.712-1.59 9.52-3.816 12.059-2.543 2.855-6.04 4.442-8.585 4.442v.317c2.544 1.27 6.042 2.539 8.267 5.395zM304.287 151.363c-2.544-.317-6.042-1.587-8.585-4.443-2.226-2.538-3.816-6.663-3.816-12.058V97.735c0-4.125-2.226-6.663-6.041-6.663h-3.498c-4.133 0-7.631-2.222-7.631-7.616 0-5.395 3.498-7.616 7.631-7.616h8.585c10.493 0 18.442 6.347 18.442 19.04v38.078c0 4.443.954 7.299 2.544 8.568 1.589 1.587 3.497 2.221 5.723 2.539 4.451.952 6.359 3.173 6.359 7.615 0 4.443-1.908 6.981-6.359 7.616-1.908.317-3.816.635-5.405 2.221-1.59 1.587-2.862 4.126-2.862 9.203v38.078c0 12.693-7.949 19.04-18.442 19.04h-8.585c-4.133 0-7.631-2.221-7.631-7.616 0-5.394 3.498-7.616 7.631-7.616h3.498c3.815 0 6.041-2.538 6.041-6.663v-37.445c0-5.711 1.59-9.519 3.816-12.058 2.543-3.173 6.041-4.442 8.585-5.077zM54.371 388.403c0 8.885-8.267 14.597-20.35 14.597-9.538 0-16.215-3.173-18.759-9.202-1.272-3.174.954-6.347 4.451-6.347h.636c1.908 0 3.816.952 4.452 2.856 1.272 2.856 4.451 4.443 9.857 4.443 6.04 0 9.538-2.222 9.538-6.03 0-11.74-28.934-2.538-28.934-22.847 0-8.567 7.949-14.597 19.395-14.597 8.903 0 15.263 3.174 17.806 8.885 1.272 3.174-.954 6.347-4.451 6.347h-.636c-1.908 0-3.816-.952-4.452-2.856-1.271-2.856-4.133-4.125-8.584-4.125-6.042 0-8.903 2.221-8.903 5.712 0 11.423 28.934 2.221 28.934 23.164zM84.26 384.278v13.328c0 2.538-2.227 4.759-4.77 4.759h-.954c-2.544 0-4.77-2.221-4.77-4.759v-13.645c0-.952-.318-1.587-.636-2.222l-13.036-23.164c-1.907-3.173.636-6.981 4.134-6.981 1.59 0 3.18.952 4.133 2.538l10.81 19.674 10.493-19.674c.954-1.586 2.544-2.538 4.134-2.538 3.497 0 5.723 3.808 4.133 6.981l-13.354 23.482c-.318.634-.318 1.586-.318 2.221zM123.05 379.835c0-2.221 1.908-4.125 4.134-4.125h1.589c5.088 0 7.949-3.173 7.949-7.933 0-4.442-2.861-7.616-7.949-7.616h-6.041c-2.544 0-4.769 2.222-4.769 4.76v33.002c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-38.714c0-4.125 3.498-7.615 7.631-7.615h13.354c11.447 0 18.442 5.712 18.442 16.183 0 10.472-6.995 16.184-18.442 16.184h-1.589c-1.908 0-3.816-1.904-3.816-4.126zM197.77 356.354v41.569c0 2.538-2.225 4.76-4.769 4.76h-.954c-2.544 0-4.769-2.222-4.769-4.76v-16.818h-22.575v16.818c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.226-4.76 4.769-4.76h.954c2.544 0 4.77 2.221 4.77 4.76v15.866h22.893v-15.866c0-2.539 2.225-4.76 4.769-4.76h.954c2.226 0 4.451 2.221 4.451 4.76zM206.673 377.297c0-15.866 10.811-26.021 25.437-26.021 14.626 0 25.437 9.837 25.437 25.704 0 16.183-10.811 26.02-25.437 26.02-14.626 0-25.437-9.837-25.437-25.703zm40.381-.317c0-10.789-6.677-17.136-14.944-17.136-8.267 0-14.944 6.347-14.944 17.136 0 10.789 6.677 17.135 14.944 17.135 8.267 0 14.944-6.346 14.944-17.135zM309.056 356.354v41.569c0 2.538-2.226 4.76-4.769 4.76h-2.226c-1.59 0-3.18-.952-3.816-2.222l-21.939-33.318v30.78c0 2.538-2.226 4.76-4.769 4.76h-.636c-2.544 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.225-4.76 4.769-4.76h2.226c1.589 0 3.179.952 3.815 2.221l21.939 33.636v-30.78c0-2.539 2.226-4.76 4.77-4.76h.636c2.861-.317 4.769 1.904 4.769 4.443z",fill:"#0A2240"})),n.createElement("defs",null,n.createElement("radialGradient",{id:"prefix__paint0_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(128.005 0 0 127.749 161.502 161.916)"},n.createElement("stop",{stopColor:"#FFB819"}),n.createElement("stop",{offset:1,stopColor:"#FF48CC"})),n.createElement("clipPath",{id:"prefix__clip0"},n.createElement("path",{fill:"#fff",d:"M0 0h324v403H0z"}))))};var v=function(e){return n.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.707 5.707a1 1 0 00-1.414-1.414l-7 7a1 1 0 000 1.414l7 7a1 1 0 001.414-1.414L7.414 13H19a1 1 0 100-2H7.414l5.293-5.293z"}))},h=(t(130),t(33)),E=t(52),b=Object(E.c)({name:"user",initialState:{},reducers:{setUser:function(e,a){return a.payload?Object(h.a)(Object(h.a)({},e),a.payload):{}}}});b.sagas={fetchUserAndAdAccountsAsync:Object(E.b)("user/fetchUserAndAdAccountsAsync")};var g=b.actions.setUser,_=b.sagas.fetchUserAndAdAccountsAsync,y=b.reducer,N=Object(E.c)({name:"adAccounts",initialState:{data:[]},reducers:{setAdAccounts:function(e,a){return a.payload?Object(h.a)(Object(h.a)({},e),a.payload):{data:[]}}}}),j=N.actions.setAdAccounts,D=N.reducer,A=Object(d.b)((function(e){return{user:e.user}}),(function(e){return Object(u.b)({fetchUserAndAdAccountsAsync:_,setUser:g,setAdAccounts:j},e)}))((function(e){var a=e.title,t=e.setAdAccounts,l=e.user,r=e.setUser,i=e.isHome,o=e.fetchUserAndAdAccountsAsync;return Object(n.useEffect)((function(){r({isLoading:!0}),window.checkLoginState=function(){window.FB?window.FB.getLoginStatus((function(e){r({isLoading:!0}),"connected"===e.status?o():(console.log("Please log into this webpage."),r({isLoading:!1}))})):console.log("FB not loaded.")},window.checkLoginState(),window.fbAsyncInit=function(){window.FB.init({appId:"2772453809519165",cookie:!0,xfbml:!0,version:"v6.0"}),window.FB.AppEvents.logPageView(),window.checkLoginState()},function(e,a,t){var n,c=e.getElementsByTagName(a)[0];e.getElementById(t)||((n=e.createElement(a)).id=t,n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v7.0&appId=2772453809519165&autoLogAppEvents=1",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),[]),c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__line-left"},!i&&c.a.createElement("div",{className:"header__back-to-home",onClick:function(){return Object(s.b)("/")}},c.a.createElement(v,{className:"header__arrow-left"}),c.a.createElement("span",{className:"header__back-to-home-text"},"Home")),c.a.createElement("div",{className:"header__title"},a)),c.a.createElement(f,{className:"header__logo"}),c.a.createElement("div",{className:"header__line-right"}),c.a.createElement("div",{className:"header__account"},l.isLoading&&c.a.createElement("div",{className:"spinner-border text-primary spinner-border-sm mx-3",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),l.isNoAuth&&!l.isLoading?c.a.createElement("span",{className:"text-danger"},"\u4f60\u6c92\u6709\u6b0a\u9650"):"",l.isLogin&&!l.isLoading?c.a.createElement("div",{className:"text-right"},c.a.createElement("div",{className:"bg-primary rounded",onClick:function(){r(!1),t(!1)}},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("span",{className:"mx-2 text-light font-weight-bold"},"\u767b\u51fa"),c.a.createElement("img",{src:l.pictureURL,alt:"avatar",className:"rounded",style:{width:"28px"}})))):"",c.a.createElement("div",{className:"w-100 text-center"},c.a.createElement("div",{className:"fb-login-button","data-size":"medium","data-button-type":"continue_with","data-layout":"default","data-auto-logout-link":"false","data-use-continue-as":"true","data-width":"","data-onlogin":"checkLoginState();","data-scope":"public_profile,email,ads_read",style:{display:l.isLogin||l.isLoading||l.isNoAuth?"none":"block"}}))))})),x=(t(131),function(e){var a=e.project,t=e.adAccount,l=Object(n.useState)(""),r=Object(o.a)(l,2),s=r[0],i=r[1],d=m(t.leadSpendTotal+t.preLaunchSpendTotal+t.fundRaisingSpendTotal).toDollar(),u=Number(t.leadSpendTotal/t.leadTotal).toFixed(1);if(!a.id)return c.a.createElement("div",{className:"project__ad-stats row"},c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u540d\u55ae\u6578"),c.a.createElement("div",{className:"ad-stats__value"},m(t.leadTotal).toNumber())),c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5e73\u5747\u540d\u55ae\u53d6\u5f97\u6210\u672c CPL"),c.a.createElement("div",{className:"ad-stats__value"},u)),c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u7e3d\u82b1\u8cbb"),c.a.createElement("div",{className:"ad-stats__value"},d)));var p=Number(a.funding_current.replace(/\$ /g,"").replace(/,/g,"")),f=Number(a.funding_target.replace(/\$ /g,"").replace(/,/g,"")),v=Math.floor(p/f*100),h=(t.leadSpendTotal+t.preLaunchSpendTotal+t.fundRaisingSpendTotal)/p,E=setInterval((function(){var e=a.finished_at.split(/[- :]/),t=new Date(e[0],e[1]-1,e[2],e[3],e[4]).getTime()-(new Date).getTime();if(t<=0)i("\u5df2\u7d50\u675f"),clearInterval(E);else{var n=Math.floor(t/864e5),c=Math.floor(t%864e5/36e5),l=Math.floor(t%36e5/6e4);Math.floor(t%6e4/1e3);i("".concat(n," \u65e5 ").concat(c," \u6642 ").concat(l," \u5206"))}}),1e3);return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4 project__image"},c.a.createElement("div",{style:{backgroundImage:"url(".concat(a.og_image,")")}})),c.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4 project__ad-stats row"},c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},c.a.createElement("a",{href:"https://www.zeczec.com/projects/"+t.projectId,target:"blank"},a.name)),c.a.createElement("div",{className:"ad-stats__value"},a.funding_current)),c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5ee3\u544a\u82b1\u8cbb"),c.a.createElement("div",{className:"ad-stats__value"},d)),c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5ee3\u544a\u5360\u6bd4"),c.a.createElement("div",{className:"ad-stats__value"},m(h).toPercentage()))),c.a.createElement("div",{className:"col-12 col-sm-6 col-lg-4 project__content"},c.a.createElement("div",{className:"project__content-info"},c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u76ee\u6a19"),c.a.createElement("div",{className:"list__value"},a.funding_target)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u9054\u6210\u6bd4\u4f8b"),c.a.createElement("div",{className:"list__value"},m(v).toNumber(),"%")),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u8d0a\u52a9\u4eba\u6578"),c.a.createElement("div",{className:"list__value"},a.sponsor_count)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u6642\u7a0b"),c.a.createElement("div",{className:"list__value"},a.started_at," ~ ",a.finished_at)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u5012\u6578"),c.a.createElement("div",{className:"list__value"},s)),c.a.createElement("div",{className:"project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u5e73\u5747 CPL"),c.a.createElement("div",{className:"list__value"},u)))))});var O=Object(d.b)((function(e){return{adAccounts:e.adAccounts}}),(function(e){return Object(u.b)({},e)}))((function(e){var a=e.adAccounts,t=Object(n.useState)(!0),l=Object(o.a)(t,2),r=l[0],d=l[1],u=r?Object(i.a)(a.data).filter((function(e){return e.adAccountLive})):Object(i.a)(a.data);return u=u.sort((function(e,a){return a.campaignStatus.value-e.campaignStatus.value})),Object(n.useEffect)((function(){var e=new URL(document.location).searchParams.get("p");e&&Object(s.b)("".concat(e))}),[]),c.a.createElement("div",{className:"container position-relative my-3"},c.a.createElement(A,{title:"\u5ee3\u544a\u5e33\u6236",isHome:!0}),c.a.createElement("div",{className:"ad-accounts__switch"},c.a.createElement(p,{labelFor:"isFilter",isOn:r,handleToggle:function(){return d(!r)},onColor:"#e43f5a",title:"\u53ea\u986f\u793a\u6d3b\u8e8d\u5ee3\u544a\u5e33\u6236"})),a.isLoading?c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))):c.a.createElement(c.a.Fragment,null,c.a.createElement("main",{className:"d-flex flex-wrap justify-content-center"},u.map((function(e){var a=e.name,t=e.id,n=e.adAccountLive,l=e.campaignStatus,r=e.amount_spent;return c.a.createElement("div",{key:t,className:"card m-2 ad-account-card",style:{width:"18rem",opacity:!n&&.3}},c.a.createElement("div",{className:"card-body",onClick:function(){return Object(s.b)("/ad-account/".concat(t))}},c.a.createElement("span",{className:"float-right badge badge-"+(3===l.value?"launch":2===l.value?"pre-launch":1===l.value?"lead":"")},l.name),c.a.createElement("h5",{className:"card-title"},a),c.a.createElement("p",{className:"card-text"},"\u7e3d\u5ee3\u544a\u82b1\u8cbb\uff1a",m(r).toDollar())))})))))})),S=t(75),w=t(93),k=t(91);t(223),t(224);var R=function(e){var a=e.adAccountId,t=Object(n.useState)(!0),l=Object(o.a)(t,2),r=l[0],s=l[1],d=Object(n.useState)(!0),u=Object(o.a)(d,2),p=u[0],f=u[1],v=Object(n.useState)(!1),E=Object(o.a)(v,2),b=E[0],g=E[1],_=Object(w.a)({name:"",platformId:"",projectId:"",data:[],dateArray:[],leadSpendTotal:0,leadSpendDaily:[],leadTotal:0,leadDaily:[],costPerLeadDaily:[],preLaunchSpendTotal:0,preLaunchSpendDaily:[],fundRaisingSpendTotal:0,fundRaisingSpendDaily:[],adsDirectFundRaisingTotal:0,adsDirectFundRaisingDaily:[],adsDirectRoasDaily:[],fundRaisingTotal:0,fundRaisingDaily:[],orderCountTotal:0,orderCountDaily:[],totalRoasDaily:[]}),y=Object(o.a)(_,2),N=y[0],j=y[1],D=Object(w.a)({started_at:void 0,fundRaisingDateMap:void 0,orderCountDateMap:void 0}),O=Object(o.a)(D,2),R=O[0],L=O[1],T={maintainAspectRatio:!1,elements:{line:{tension:0,borderWidth:2},point:{radius:0}},hover:{intersect:!1},tooltips:{mode:"index",intersect:!1}},F={labels:R.projectStartIndex?Object(i.a)(N.dateArray).reverse().slice(R.projectStartIndex):[],datasets:[{label:"\u7e3d\u9ad4 ROAS",fill:!1,borderColor:"#1060AB",pointBackgroundColor:"#1060AB",pointHoverBackgroundColor:"#1060AB",datalabels:{color:"#1060AB",align:"top",offset:8},data:R.projectStartIndex?Object(i.a)(N.totalRoasDaily).reverse().slice(R.projectStartIndex):[]},{label:"\u5ee3\u544a ROAS",fill:!1,borderColor:"#1FA3EE",pointBackgroundColor:"#1FA3EE",pointHoverBackgroundColor:"#1FA3EE",datalabels:{color:"#1FA3EE",align:"bottom",offset:8},data:R.projectStartIndex?Object(i.a)(N.adsDirectRoasDaily).reverse().slice(R.projectStartIndex):[]}]},I=Object(h.a)(Object(h.a)({},T),{},{scales:{yAxes:[{type:"linear",display:!0,position:"left",scaleLabel:{display:!0,labelString:"ROAS"}}],xAxes:[{ticks:{callback:function(e,a,t){return e.slice(5)}}}]}}),C={labels:R.projectStartIndex?Object(i.a)(N.dateArray).reverse().slice(0,R.projectStartIndex+1):Object(i.a)(N.dateArray).reverse(),datasets:[{label:"CPL",fill:!1,borderColor:"#D07D00",pointBackgroundColor:"#D07D00",pointHoverBackgroundColor:"#D07D00",datalabels:{color:"#D07D00",align:"top",offset:8},data:R.projectStartIndex?Object(i.a)(N.costPerLeadDaily).reverse().slice(0,R.projectStartIndex+1):Object(i.a)(N.costPerLeadDaily).reverse()}]},M=Object(h.a)(Object(h.a)({},T),{},{scales:{yAxes:[{type:"linear",display:!0,position:"left",scaleLabel:{fontColor:"#D07D00",display:!0,labelString:"\u540d\u55ae\u53d6\u5f97\u6210\u672c"}}],xAxes:[{ticks:{callback:function(e,a,t){return e.slice(5)}}}]}});return Object(n.useEffect)((function(){fetch("https://syphon-api.zectrack.today/ad-account/info/".concat(a)).then((function(e){return e.json()})).then((function(e){j((function(a){a.name=e.name,a.platformId=e.business_street,a.projectId=e.business_street2}))})),s(!0),fetch("https://syphon-api.zectrack.today/ad-account/insights/".concat(a)).then((function(e){return e.json()})).then((function(e){j((function(a){a.data=function(e){var a={};return e.forEach((function(e){var t=e.date_start,n=function(e){return e.campaign_name.includes("\u9810\u71b1")?"\u9810\u71b1":e.campaign_name.includes("\u524d\u6e2c")?"\u524d\u6e2c":e.campaign_name.includes("\u4e0a\u7dda")?"\u4e0a\u7dda":"none"}(e);a[t]?a[t][n]?a[t][n].push(e):a[t][n]=[e]:a[t]=Object(S.a)({},n,[e])})),a}(e.data)})),s(!1)}))}),[a,j]),Object(n.useEffect)((function(){!function(){var e=Object.keys(N.data),a=0,t=[],n=0,c=[],l=[],r=0,s=[],i=0,o=[],d=0,u=[],m=[];Object.values(N.data).forEach((function(e){if(e["\u9810\u71b1"]){var p=e["\u9810\u71b1"],f=0;p.forEach((function(e){if(0!==parseInt(e.spend)){var a=parseInt(e.spend);f+=a}})),0!==f?(r+=f,s.push(f)):s.push(null)}else s.push(null);if(e["\u524d\u6e2c"]){var v=e["\u524d\u6e2c"],h=0,E=0;v.forEach((function(e){if(0!==parseInt(e.spend)&&e.actions){var a=parseInt(e.spend),t=e.actions.find((function(e){return"offsite_conversion.fb_pixel_custom"===e.action_type||"lead"===e.action_type}));h+=a,E+=t?parseInt(t.value):0}})),0!==h&&0!==E?(a+=h,t.push(h),n+=E,c.push(E),l.push((h/E).toFixed(1))):(t.push(null),c.push(null),l.push(null))}else t.push(null),c.push(null),l.push(null);if(e["\u4e0a\u7dda"]){var b=e["\u4e0a\u7dda"],g=0,_=0;b.forEach((function(e){if(0!==parseInt(e.spend)){var a=parseInt(e.spend),t=e.action_values&&e.action_values.find((function(e){return"omni_purchase"===e.action_type}));g+=a,_+=t?parseInt(t.value):0}})),0!==g&&0!==_?(i+=g,o.push(g),d+=_,u.push(_),m.push((_/g).toFixed(1))):(o.push(null),u.push(null),m.push(null))}else o.push(null),u.push(null),m.push(null)})),j((function(p){p.dateArray=e,p.leadSpendTotal=a,p.leadSpendDaily=t,p.leadTotal=n,p.leadDaily=c,p.costPerLeadDaily=l,p.preLaunchSpendTotal=r,p.preLaunchSpendDaily=s,p.fundRaisingSpendTotal=i,p.fundRaisingSpendDaily=o,p.adsDirectFundRaisingTotal=d,p.adsDirectFundRaisingDaily=u,p.adsDirectRoasDaily=m}))}()}),[N.data,j]),Object(n.useEffect)((function(){var e=N.platformId,a=N.projectId;e&&a&&function(e,a){fetch("https://drip.zectrack.today/api/platform/".concat(e,"/projects/").concat(a)).then((function(e){return e.json()})).then((function(e){L((function(a){return Object(h.a)(Object(h.a)(Object(h.a)({},a),e),{},{timeline:JSON.parse(e.timeline).sort((function(e,a){return e[0]-a[0]})),sponsor_count:m(e.sponsor_count).toNumber(),funding_target:m(e.funding_target).toDollar(),funding_current:m(e.funding_current).toDollar(),started_at:m(e.started_at).toProjectTime(),finished_at:m(e.finished_at).toProjectTime()})}))}))}(e,a)}),[N.platformId,N.projectId,L]),Object(n.useEffect)((function(){if(R.timeline){var e=R.started_at.slice(0,10),a=Object(i.a)(N.dateArray).reverse().findIndex((function(a){return a===e})),t=new Date(R.started_at.slice(0,-1)).getTime()/1e3,n=new Date(R.finished_at.slice(0,-1)).getTime()/1e3;t-=3600;var c={};R.timeline.forEach((function(e){if(!(e[0]<t||e[0]>n)){var a=m(1e3*e[0]).toDate(),l=[m(1e3*e[0]).toTime(),e[1],e[2]];c[a]?c[a].push(l):c[a]=[l]}}));for(var l={},r={},s=0,d=0,u=0,p=Object.entries(c);u<p.length;u++){var f=Object(o.a)(p[u],2),v=f[0],h=f[1],E=h[h.length-1][2],b=h[h.length-1][1];l[v]=E-s,r[v]=b-d,s=E,d=b}L((function(e){e.fundRaisingDateMap=l,e.orderCountDateMap=r,e.projectStartIndex=a}))}}),[R.timeline,R.started_at,R.finished_at,L,N.dateArray]),Object(n.useEffect)((function(){if(R.fundRaisingDateMap&&N.fundRaisingSpendDaily.length>0){var e=0,a=[],t=0,n=[],c=[];N.dateArray.forEach((function(l,r){R.fundRaisingDateMap[l]&&R.orderCountDateMap[l]&&N.fundRaisingSpendDaily[r]?(e+=R.fundRaisingDateMap[l],a.push(R.fundRaisingDateMap[l]),t+=R.orderCountDateMap[l],n.push(R.orderCountDateMap[l]),c.push((R.fundRaisingDateMap[l]/N.fundRaisingSpendDaily[r]).toFixed(1))):(n.push(null),a.push(null),c.push(null))})),j((function(l){l.fundRaisingTotal=e,l.fundRaisingDaily=a,l.orderCountTotal=t,l.orderCountDaily=n,l.totalRoasDaily=c}))}}),[R.fundRaisingDateMap,R.orderCountDateMap,N.fundRaisingSpendDaily,N.dateArray,j]),Object(n.useEffect)((function(){R.id&&(f(!1),g(!0))}),[R.id]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3"},c.a.createElement(A,{title:N.name})),r?c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},c.a.createElement(x,{project:R,adAccount:N})),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"ad-stats-nav-tabs ".concat(p?"ad-stats-nav-tabs--lead":""," ").concat(b?"ad-stats-nav-tabs--fund-raising":"")},c.a.createElement("div",{className:"tab__item tab__item--lead ".concat(p?"active":""),onClick:function(){f(!0),g(!1)}},"\u524d\u6e2c"),R.id&&c.a.createElement("div",{className:"tab__item tab__item--fund-raising ".concat(b?"active":""),onClick:function(){f(!1),g(!0)}},"\u4e0a\u7dda"))),R.id&&b&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3 line-chart",style:{height:"300px"}},c.a.createElement(k.a,{data:F,options:I})),c.a.createElement("div",{className:"adAccount__table adAccount__table--fund-raising"},c.a.createElement("div",{className:"adAccount__table-title"},"\u6bcf\u65e5\u6578\u64da"),c.a.createElement("div",{className:"container table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Date"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u96c6\u8cc7\u91d1\u984d"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u8a02\u55ae\u6578"),c.a.createElement("td",null,"\u4e0a\u7dda\u5ee3\u544a\u82b1\u8cbb"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5\u8f49\u63db\u91d1\u984d"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5 ROAS"),c.a.createElement("td",null,"\u7e3d\u9ad4 ROAS")),c.a.createElement("tr",null,c.a.createElement("th",null,"\u7e3d\u8a08"),c.a.createElement("th",{className:"table--hide-in-mobile"},m(N.fundRaisingTotal).toDollar()),c.a.createElement("th",{className:"table--hide-in-mobile"},m(N.orderCountTotal).toNumber()),c.a.createElement("th",null,m(N.fundRaisingSpendTotal).toDollar()),c.a.createElement("th",null,m(N.adsDirectFundRaisingTotal).toDollar()),c.a.createElement("th",null,(N.adsDirectFundRaisingTotal/N.fundRaisingSpendTotal).toFixed(1)),c.a.createElement("th",null,(N.fundRaisingTotal/N.fundRaisingSpendTotal).toFixed(1)))),c.a.createElement("tbody",null,N.dateArray.map((function(e,a){return a>N.dateArray.length-R.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(a)},c.a.createElement("th",null,e.slice(5)),c.a.createElement("td",{className:"table--hide-in-mobile"},m(N.fundRaisingDaily[a]).toDollar()),c.a.createElement("td",{className:"table--hide-in-mobile"},N.orderCountDaily[a]),c.a.createElement("td",null,m(N.fundRaisingSpendDaily[a]).toDollar()),c.a.createElement("td",null,m(N.adsDirectFundRaisingDaily[a]).toDollar()),c.a.createElement("td",null,N.adsDirectRoasDaily[a]),c.a.createElement("td",null,N.totalRoasDaily[a]))})))))))),p&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3 line-chart",style:{height:"300px"}},c.a.createElement(k.a,{data:C,options:M})),c.a.createElement("div",{className:"adAccount__table adAccount__table--lead"},c.a.createElement("div",{className:"adAccount__table-title"},"\u6bcf\u65e5\u6578\u64da"),c.a.createElement("div",{className:"container table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Date"),c.a.createElement("td",null,"\u524d\u6e2c\u82b1\u8cbb"),c.a.createElement("td",null,"\u540d\u55ae\u6578"),c.a.createElement("td",null,"CPL"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u9810\u71b1\u82b1\u8cbb")),c.a.createElement("tr",null,c.a.createElement("th",null,"\u7e3d\u8a08"),c.a.createElement("th",null,m(N.leadSpendTotal).toDollar()),c.a.createElement("th",null,m(N.leadTotal).toNumber()),c.a.createElement("th",null,(N.leadSpendTotal/N.leadTotal).toFixed(1)),c.a.createElement("th",{className:"table--hide-in-mobile"},m(N.preLaunchSpendTotal).toDollar()))),c.a.createElement("tbody",null,N.dateArray.map((function(e,a){return a<N.dateArray.length-R.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(a)},c.a.createElement("th",null,e.slice(5)),c.a.createElement("td",null,m(N.leadSpendDaily[a]).toDollar()),c.a.createElement("td",null,m(N.leadDaily[a]).toNumber()),c.a.createElement("td",null,m(N.costPerLeadDaily[a]).toDollar()),c.a.createElement("td",{className:"table--hide-in-mobile"},m(N.preLaunchSpendDaily[a]).toDollar()))}))))))))))},L=function(){return c.a.createElement(s.a,{basepath:"/",primary:!1},c.a.createElement(O,{path:"/"}),c.a.createElement(R,{path:"/ad-account/:adAccountId"}))},T=Object(u.c)({user:y,adAccounts:D}),F=t(49),I=t.n(F),C=t(34),M=I.a.mark(z),B=I.a.mark(U);function z(e){var a,t,n;return I.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(C.c)(g({isLoading:!0}));case 4:return c.next=6,Object(C.c)(j({isLoading:!0}));case 6:return c.next=8,Object(C.b)((function(){return new Promise((function(e){window.FB.api("/me?fields=name,picture{url},adaccounts.limit(1000){age,name,amount_spent,campaigns.limit(1000){status,name}}",(function(a){e(a)}))}))}));case 8:if(!(a=c.sent).error){c.next=16;break}return c.next=12,Object(C.c)(g({isNoAuth:!0}));case 12:return c.next=14,Object(C.c)(j({data:[]}));case 14:c.next=22;break;case 16:return t={name:a.name,pictureURL:a.picture.data.url,isLogin:!0},n={data:P(a.adaccounts.data)},c.next=20,Object(C.c)(g(t));case 20:return c.next=22,Object(C.c)(j(n));case 22:return c.next=24,Object(C.c)(g({isLoading:!1}));case 24:return c.next=26,Object(C.c)(j({isLoading:!1}));case 26:c.next=33;break;case 28:return c.prev=28,c.t0=c.catch(1),c.next=32,Object(C.c)(g({isLoading:!1}));case 32:console.log(c.t0);case 33:case"end":return c.stop()}}),M,null,[[1,28]])}function P(e){var a=e.sort((function(e,a){return e.age-a.age}));return a=a.map((function(e){return e.adAccountLive=!1,e.campaignStatus={name:"",value:0},e.campaigns&&e.campaigns.data.forEach((function(a){"ACTIVE"===a.status&&(e.adAccountLive=!0),e.campaignStatus=function(e,a){var t=function(e){return e.includes("\u4e0a\u7dda")?{name:"\u4e0a\u7dda",value:3}:e.includes("\u9810\u71b1")?{name:"\u9810\u71b1",value:2}:e.includes("\u524d\u6e2c")?{name:"\u524d\u6e2c",value:1}:{name:"",value:0}}(a);return t.value>e.value?t:e}(e.campaignStatus,a.name)})),e}))}function U(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.d)(_,z);case 2:case"end":return e.stop()}}),B)}var H=I.a.mark(J);function J(){return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(C.a)([U()]);case 2:case"end":return e.stop()}}),H)}var V=t(116),$=(t(226),Object(V.a)()),W=Object(E.a)({reducer:T,middleware:[$]});$.run(J),r.a.render(c.a.createElement(d.a,{store:W},c.a.createElement(c.a.StrictMode,null,c.a.createElement(L,null))),document.getElementById("root"))}},[[117,1,2]]]);
//# sourceMappingURL=main.6d6b8567.chunk.js.map