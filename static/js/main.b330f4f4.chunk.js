(this["webpackJsonpmixxin-dashboard"]=this["webpackJsonpmixxin-dashboard"]||[]).push([[0],{118:function(e,t,a){e.exports=a(229)},129:function(e,t,a){},130:function(e,t,a){},131:function(e,t,a){},132:function(e,t,a){},226:function(e,t,a){},229:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(74),r=a.n(l),i=a(54),o=a(30),s=a(16),d=a(50),u=a(21);function m(e){return{toDollar:function(){return e||0===e?"$ ".concat(e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):""},toNumber:function(){return e||0===e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):""},toProjectTime:function(){var t=e.split("T"),a=Object(s.a)(t,2),n=a[0],c=a[1];return e?"".concat(n," ").concat(c.substring(0,5)):""},toPercentage:function(){return e?"".concat(Number(100*e).toFixed(1)," %"):""},toDate:function(){var t=new Date(e),a=t.getFullYear(),n=("0"+(t.getMonth()+1)).slice(-2),c=("0"+t.getDate()).slice(-2);return e?"".concat(a,"-").concat(n,"-").concat(c):""},toTime:function(){var t=new Date(e),a=("0"+t.getHours()).slice(-2),n=("0"+t.getMinutes()).slice(-2);return e?"".concat(a,":").concat(n):""}}}a(129),a(130);var p=function(e){var t=e.labelFor,a=e.isOn,n=e.handleToggle,l=e.onColor;e.title;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"switch-container"},c.a.createElement("input",{checked:a,onChange:n,className:"react-switch-checkbox",id:"react-switch-"+t,type:"checkbox"}),c.a.createElement("label",{style:{background:a&&l},className:"react-switch-label",htmlFor:"react-switch-"+t},c.a.createElement("span",{className:"react-switch-button"})),c.a.createElement("span",null,"\u53ea\u986f\u793a\u6d3b\u8e8d\u5ee3\u544a\u5e33\u6236")))};var f=function(e){return n.createElement("svg",Object.assign({width:324,height:403,viewBox:"0 0 324 403",fill:"none"},e),n.createElement("g",{clipPath:"url(#prefix__clip0)"},n.createElement("path",{d:"M236.243 182.778c4.452 10.789 3.498 23.482-3.497 33.954-11.129 16.5-33.704 20.943-50.556 9.837l-20.031-13.328-20.031-13.645c-16.534-11.106-39.109-6.664-50.556 9.837-6.995 10.154-7.949 22.847-3.497 33.636 0 0 0 .318.317.318 10.493 25.385 32.432 42.521 57.551 47.915 15.262 3.174 31.478 2.222 47.058-4.125 5.087-2.221 9.857-4.76 14.308-7.616 30.524-20.943 43.56-60.926 28.934-96.783z",fill:"url(#prefix__paint0_radial)"}),n.createElement("path",{d:"M161.841 302.726c-22.893 0-46.104-8.885-63.592-26.338-16.852-16.818-26.39-39.348-26.39-63.464 0-23.8 9.22-46.33 26.39-63.465 3.816-3.808 9.857-3.808 13.672 0 3.816 3.808 3.816 9.837 0 13.645-13.354 13.327-20.667 30.78-20.667 49.502s7.313 36.492 20.667 49.503c27.345 27.289 71.859 27.289 99.522 0 27.344-27.29 27.344-71.715 0-99.322l-56.279-55.532c-3.816-3.808-3.816-9.837 0-13.645 3.815-3.808 9.857-3.808 13.672 0l56.597 56.484c34.975 34.905 34.975 91.706 0 126.611-17.488 17.453-40.381 26.021-63.592 26.021z",fill:"#0A2240"}),n.createElement("path",{d:"M162.477 255.445c-5.405 0-9.857-4.443-9.857-9.837v-82.504l-41.334-41.252c-27.98-27.924-27.98-72.984 0-100.909C124.64 7.298 142.763 0 161.841 0s37.201 7.298 50.555 20.943c13.037 13.01 20.668 30.463 20.986 48.868v.317c0 14.28-3.18 26.973-9.857 37.444v.318c-2.862 4.442-8.903 6.029-13.354 3.173-4.452-2.856-6.041-8.885-3.18-13.328v-.317c4.452-7.298 6.995-16.5 6.995-26.972-.318-13.328-5.723-26.02-15.262-35.54-9.856-9.837-22.893-15.232-36.883-15.232-13.99 0-27.026 5.395-36.883 15.232-20.032 19.99-20.032 52.992 0 72.984l44.514 44.425c1.908 1.904 2.862 4.442 2.862 6.981v86.629c0 5.077-4.452 9.52-9.857 9.52zM27.98 156.123c2.544 2.538 3.816 6.664 3.816 12.375v36.81c0 4.125 2.226 6.664 6.041 6.664h3.498c4.133 0 7.63 2.221 7.63 7.615 0 5.395-3.497 7.616-7.63 7.616H32.75c-10.493 0-18.442-6.346-18.442-19.039v-38.079c0-4.76-1.272-7.616-2.861-9.202-1.59-1.587-3.498-1.904-5.406-2.222-4.451-.634-6.359-3.173-6.359-7.615 0-4.443 1.908-6.664 6.36-7.616 1.907-.317 4.133-.952 5.723-2.539 1.59-1.586 2.543-4.125 2.543-8.567v-38.08c0-12.692 7.95-19.038 18.442-19.038h8.585c4.133 0 7.63 2.22 7.63 7.615s-3.497 7.616-7.63 7.616h-3.18c-3.816 0-6.041 2.539-6.041 6.664v36.809c0 5.712-1.59 9.52-3.816 12.059-2.543 2.855-6.04 4.442-8.585 4.442v.317c2.544 1.27 6.042 2.539 8.267 5.395zM304.287 151.363c-2.544-.317-6.042-1.587-8.585-4.443-2.226-2.538-3.816-6.663-3.816-12.058V97.735c0-4.125-2.226-6.663-6.041-6.663h-3.498c-4.133 0-7.631-2.222-7.631-7.616 0-5.395 3.498-7.616 7.631-7.616h8.585c10.493 0 18.442 6.347 18.442 19.04v38.078c0 4.443.954 7.299 2.544 8.568 1.589 1.587 3.497 2.221 5.723 2.539 4.451.952 6.359 3.173 6.359 7.615 0 4.443-1.908 6.981-6.359 7.616-1.908.317-3.816.635-5.405 2.221-1.59 1.587-2.862 4.126-2.862 9.203v38.078c0 12.693-7.949 19.04-18.442 19.04h-8.585c-4.133 0-7.631-2.221-7.631-7.616 0-5.394 3.498-7.616 7.631-7.616h3.498c3.815 0 6.041-2.538 6.041-6.663v-37.445c0-5.711 1.59-9.519 3.816-12.058 2.543-3.173 6.041-4.442 8.585-5.077zM54.371 388.403c0 8.885-8.267 14.597-20.35 14.597-9.538 0-16.215-3.173-18.759-9.202-1.272-3.174.954-6.347 4.451-6.347h.636c1.908 0 3.816.952 4.452 2.856 1.272 2.856 4.451 4.443 9.857 4.443 6.04 0 9.538-2.222 9.538-6.03 0-11.74-28.934-2.538-28.934-22.847 0-8.567 7.949-14.597 19.395-14.597 8.903 0 15.263 3.174 17.806 8.885 1.272 3.174-.954 6.347-4.451 6.347h-.636c-1.908 0-3.816-.952-4.452-2.856-1.271-2.856-4.133-4.125-8.584-4.125-6.042 0-8.903 2.221-8.903 5.712 0 11.423 28.934 2.221 28.934 23.164zM84.26 384.278v13.328c0 2.538-2.227 4.759-4.77 4.759h-.954c-2.544 0-4.77-2.221-4.77-4.759v-13.645c0-.952-.318-1.587-.636-2.222l-13.036-23.164c-1.907-3.173.636-6.981 4.134-6.981 1.59 0 3.18.952 4.133 2.538l10.81 19.674 10.493-19.674c.954-1.586 2.544-2.538 4.134-2.538 3.497 0 5.723 3.808 4.133 6.981l-13.354 23.482c-.318.634-.318 1.586-.318 2.221zM123.05 379.835c0-2.221 1.908-4.125 4.134-4.125h1.589c5.088 0 7.949-3.173 7.949-7.933 0-4.442-2.861-7.616-7.949-7.616h-6.041c-2.544 0-4.769 2.222-4.769 4.76v33.002c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-38.714c0-4.125 3.498-7.615 7.631-7.615h13.354c11.447 0 18.442 5.712 18.442 16.183 0 10.472-6.995 16.184-18.442 16.184h-1.589c-1.908 0-3.816-1.904-3.816-4.126zM197.77 356.354v41.569c0 2.538-2.225 4.76-4.769 4.76h-.954c-2.544 0-4.769-2.222-4.769-4.76v-16.818h-22.575v16.818c0 2.538-2.226 4.76-4.77 4.76h-.954c-2.543 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.226-4.76 4.769-4.76h.954c2.544 0 4.77 2.221 4.77 4.76v15.866h22.893v-15.866c0-2.539 2.225-4.76 4.769-4.76h.954c2.226 0 4.451 2.221 4.451 4.76zM206.673 377.297c0-15.866 10.811-26.021 25.437-26.021 14.626 0 25.437 9.837 25.437 25.704 0 16.183-10.811 26.02-25.437 26.02-14.626 0-25.437-9.837-25.437-25.703zm40.381-.317c0-10.789-6.677-17.136-14.944-17.136-8.267 0-14.944 6.347-14.944 17.136 0 10.789 6.677 17.135 14.944 17.135 8.267 0 14.944-6.346 14.944-17.135zM309.056 356.354v41.569c0 2.538-2.226 4.76-4.769 4.76h-2.226c-1.59 0-3.18-.952-3.816-2.222l-21.939-33.318v30.78c0 2.538-2.226 4.76-4.769 4.76h-.636c-2.544 0-4.769-2.222-4.769-4.76v-41.569c0-2.539 2.225-4.76 4.769-4.76h2.226c1.589 0 3.179.952 3.815 2.221l21.939 33.636v-30.78c0-2.539 2.226-4.76 4.77-4.76h.636c2.861-.317 4.769 1.904 4.769 4.443z",fill:"#0A2240"})),n.createElement("defs",null,n.createElement("radialGradient",{id:"prefix__paint0_radial",cx:0,cy:0,r:1,gradientUnits:"userSpaceOnUse",gradientTransform:"matrix(128.005 0 0 127.749 161.502 161.916)"},n.createElement("stop",{stopColor:"#FFB819"}),n.createElement("stop",{offset:1,stopColor:"#FF48CC"})),n.createElement("clipPath",{id:"prefix__clip0"},n.createElement("path",{fill:"#fff",d:"M0 0h324v403H0z"}))))};var b=function(e){return n.createElement("svg",Object.assign({width:24,height:24,viewBox:"0 0 24 24",fill:"none"},e),n.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.707 5.707a1 1 0 00-1.414-1.414l-7 7a1 1 0 000 1.414l7 7a1 1 0 001.414-1.414L7.414 13H19a1 1 0 100-2H7.414l5.293-5.293z"}))},h=(a(131),a(27)),v=a(53),g=Object(v.c)({name:"user",initialState:{},reducers:{setUser:function(e,t){return t.payload?Object(h.a)(Object(h.a)({},e),t.payload):{}}}});g.sagas={fetchUserAndAdAccountsAsync:Object(v.b)("user/fetchUserAndAdAccountsAsync")};var E=g.actions.setUser,_=g.sagas.fetchUserAndAdAccountsAsync,y=g.reducer,N=Object(v.c)({name:"adAccounts",initialState:{data:[]},reducers:{setAdAccounts:function(e,t){return t.payload?Object(h.a)(Object(h.a)({},e),t.payload):{data:[]}}}}),j=N.actions.setAdAccounts,w=N.reducer,D=Object(d.b)((function(e){return{user:e.user}}),(function(e){return Object(u.b)({fetchUserAndAdAccountsAsync:_,setUser:E,setAdAccounts:j},e)}))((function(e){var t=e.title,a=e.setAdAccounts,l=e.user,r=e.setUser,o=e.isHome,s=e.fetchUserAndAdAccountsAsync;return Object(n.useEffect)((function(){r({isLoading:!0}),window.checkLoginState=function(){window.FB?window.FB.getLoginStatus((function(e){r({isLoading:!0}),"connected"===e.status?s():(console.log("Please log into this webpage."),r({isLoading:!1}))})):console.log("FB not loaded.")},window.checkLoginState(),window.fbAsyncInit=function(){window.FB.init({appId:"2772453809519165",cookie:!0,xfbml:!0,version:"v12.0"}),window.FB.AppEvents.logPageView(),window.checkLoginState()},function(e,t,a){var n,c=e.getElementsByTagName(t)[0];e.getElementById(a)||((n=e.createElement(t)).id=a,n.src="https://connect.facebook.net/zh_TW/sdk.js#xfbml=1&version=v12.0&appId=2772453809519165&autoLogAppEvents=1",c.parentNode.insertBefore(n,c))}(document,"script","facebook-jssdk")}),[]),c.a.createElement("header",{className:"header"},c.a.createElement("div",{className:"header__line-left"},!o&&c.a.createElement("div",{className:"header__back-to-home",onClick:function(){return Object(i.b)("/")}},c.a.createElement(b,{className:"header__arrow-left"}),c.a.createElement("span",{className:"header__back-to-home-text"},"Home")),c.a.createElement("div",{className:"header__title"},t)),c.a.createElement(f,{className:"header__logo"}),c.a.createElement("div",{className:"header__line-right"}),c.a.createElement("div",{className:"header__account"},l.isLoading&&c.a.createElement("div",{className:"spinner-border text-primary spinner-border-sm mx-3",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading...")),l.isNoAuth&&!l.isLoading?c.a.createElement("span",{className:"text-danger"},"\u4f60\u6c92\u6709\u6b0a\u9650"):"",l.isLogin&&!l.isLoading?c.a.createElement("div",{className:"text-right"},c.a.createElement("div",{className:"bg-primary rounded",onClick:function(){r(!1),a(!1)}},c.a.createElement("div",{className:"d-flex align-items-center"},c.a.createElement("span",{className:"mx-2 text-light font-weight-bold"},"\u767b\u51fa"),c.a.createElement("img",{src:l.pictureURL,alt:"avatar",className:"rounded",style:{width:"28px"}})))):"",c.a.createElement("div",{className:"w-100 text-center"},c.a.createElement("div",{className:"fb-login-button","data-size":"medium","data-button-type":"continue_with","data-layout":"default","data-auto-logout-link":"false","data-use-continue-as":"true","data-width":"","data-onlogin":"checkLoginState();","data-scope":"public_profile,email,ads_read",style:{display:l.isLogin||l.isLoading||l.isNoAuth?"none":"block"}}))))})),O=(a(132),function(e){var t=e.project,a=e.adAccount,l=Object(n.useState)(""),r=Object(s.a)(l,2),i=r[0],o=r[1],d=a.leadTotal>0?Number(a.leadSpendTotal/a.leadTotal).toFixed(1):"-";if(!t.id)return c.a.createElement("div",{className:"project__ad-stats row"},c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u540d\u55ae\u6578"),c.a.createElement("div",{className:"ad-stats__value"},m(a.leadTotal).toNumber())),c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u5e73\u5747\u540d\u55ae\u53d6\u5f97\u6210\u672c CPL"),c.a.createElement("div",{className:"ad-stats__value"},d)),c.a.createElement("div",{className:"col-12 col-sm-4 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u7e3d\u82b1\u8cbb"),c.a.createElement("div",{className:"ad-stats__value"},m(a.leadSpendTotal+a.preLaunchSpendTotal).toDollar())));var u=Number(t.funding_current.replace(/\$ /g,"").replace(/,/g,"")),p=Number(t.funding_target.replace(/\$ /g,"").replace(/,/g,"")),f=Math.floor(u/p*100),b=a.fundRaisingSpendTotal/u,h=setInterval((function(){var e=t.finished_at.split(/[- :]/),a=new Date(e[0],e[1]-1,e[2],e[3],e[4]).getTime()-(new Date).getTime();if(a<=0)o("\u5df2\u7d50\u675f"),clearInterval(h);else{var n=Math.floor(a/864e5),c=Math.floor(a%864e5/36e5),l=Math.floor(a%36e5/6e4);Math.floor(a%6e4/1e3);o("".concat(n," \u65e5 ").concat(c," \u6642 ").concat(l," \u5206"))}}),1e3);return c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-12 col-sm-6 project__image"},c.a.createElement("div",{style:{backgroundImage:"url(".concat(t.og_image,")")}})),c.a.createElement("div",{className:"col-12 col-sm-6 project__ad-stats row"},c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},c.a.createElement("a",{href:"https://www.zeczec.com/projects/"+a.projectId,target:"blank"},t.name)),c.a.createElement("div",{className:"ad-stats__value"},t.funding_current)),c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u4e0a\u7dda\u5f8c\u5ee3\u544a\u82b1\u8cbb"),c.a.createElement("div",{className:"ad-stats__value"},m(a.fundRaisingSpendTotal).toDollar())),c.a.createElement("div",{className:"col-12 ad-stats__list"},c.a.createElement("div",{className:"ad-stats__key"},"\u4e0a\u7dda\u5f8c\u5ee3\u544a\u5360\u6bd4"),c.a.createElement("div",{className:"ad-stats__value"},m(b).toPercentage()))),c.a.createElement("div",{className:"col-12 project__content"},c.a.createElement("div",{className:"row project__content-info"},c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u76ee\u6a19"),c.a.createElement("div",{className:"list__value"},t.funding_target)),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u9054\u6210\u6bd4\u4f8b"),c.a.createElement("div",{className:"list__value"},m(f).toNumber(),"%")),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u8d0a\u52a9\u4eba\u6578"),c.a.createElement("div",{className:"list__value"},t.sponsor_count)),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u6642\u7a0b"),c.a.createElement("div",{className:"list__value"},t.started_at," ~ ",t.finished_at)),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u5012\u6578"),c.a.createElement("div",{className:"list__value"},i)),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u540d\u55ae\u6578"),c.a.createElement("div",{className:"list__value"},m(a.leadTotal).toNumber())),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u5e73\u5747 CPL"),c.a.createElement("div",{className:"list__value"},d)),c.a.createElement("div",{className:"col-12 col-sm-6 project__content-info-list"},c.a.createElement("div",{className:"list__key"},"\u524d\u6e2c/\u9810\u71b1\u7e3d\u82b1\u8cbb"),c.a.createElement("div",{className:"list__value"},m(a.leadSpendTotal).toDollar()," / ",m(a.preLaunchSpendTotal).toDollar())))))});var x=Object(d.b)((function(e){return{adAccounts:e.adAccounts}}),(function(e){return Object(u.b)({},e)}))((function(e){var t=e.adAccounts,a=Object(n.useState)(!0),l=Object(s.a)(a,2),r=l[0],d=l[1],u=r?Object(o.a)(t.data).filter((function(e){return e.adAccountLive})):Object(o.a)(t.data);return u=u.sort((function(e,t){return t.campaignStatus.value-e.campaignStatus.value})),Object(n.useEffect)((function(){var e=new URL(document.location).searchParams.get("p");e&&Object(i.b)("".concat(e))}),[]),c.a.createElement("div",{className:"container position-relative my-3"},c.a.createElement(D,{title:"\u5ee3\u544a\u5e33\u6236",isHome:!0}),c.a.createElement("div",{className:"ad-accounts__switch"},c.a.createElement(p,{labelFor:"isFilter",isOn:r,handleToggle:function(){return d(!r)},onColor:"#e43f5a",title:"\u53ea\u986f\u793a\u6d3b\u8e8d\u5ee3\u544a\u5e33\u6236"})),t.isLoading?c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))):c.a.createElement(c.a.Fragment,null,c.a.createElement("main",{className:"d-flex flex-wrap justify-content-center"},u.map((function(e){var t=e.name,a=e.id,n=e.adAccountLive,l=e.campaignStatus;e.amount_spent;return c.a.createElement("div",{key:a,className:"card m-2 ad-account-card",style:{width:"18rem",opacity:!n&&.3}},c.a.createElement("div",{className:"card-body",onClick:function(){return Object(i.b)("/ad-account/".concat(a))}},c.a.createElement("span",{className:"float-right badge badge-"+(3===l.value?"launch":2===l.value?"pre-launch":1===l.value?"lead":"")},l.name),c.a.createElement("h5",{className:"card-title"},t),c.a.createElement("p",{className:"card-text"})))})))))})),A=a(64),S=a(55),R=a(80),k=(a(224),a(39)),T=a.n(k),C=a(94),L=function(e,t){var a,c=Object(n.useState)({}),l=Object(s.a)(c,2),r=l[0],i=l[1],o={path:"/v4/reports:batchGet",root:"https://analyticsreporting.googleapis.com/",method:"POST",body:{reportRequests:e}};function d(){return(d=Object(C.a)(T.a.mark((function e(t){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(401!==t.result.error.code&&(403!==t.result.error.code||"PERMISSION_DENIED"!==t.result.error.status)){e.next=5;break}return e.next=3,new Promise((function(e,n){try{a.callback=function(t){void 0!==t.error&&n(t),e(t)},a.requestAccessToken()}catch(t){console.log(t)}}));case 3:e.next=6;break;case 5:throw new Error(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){window.gapi.client.request(o).then((function(e){i(m(e))})).catch((function(e){return function(e){return d.apply(this,arguments)}(e)})).then((function(e){return window.gapi.client.request(o)})).then((function(e){i(m(e))})).catch((function(e){return console.log(e)}))}function m(e){var t=e.result.reports[0].data,a=t.rows,n=t.totals,c={};return a&&0!==a.length?(c.total=Number(n[0].values[0]),a.forEach((function(e){var t=e.dimensions,a=e.metrics,n=t[0];n="".concat(n.slice(0,4),"-").concat(n.slice(4,6),"-").concat(n.slice(6,8));var l=a[0].values[0];c[n]=Number(l)})),c):c}return Object(n.useEffect)((function(){if(0!==t){var e,n,c,l,r=new Promise((function(t,a){e=t,n=a})),i=new Promise((function(e,t){c=e,l=t}));Object(C.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r;case 2:return e.next=4,new Promise((function(e,t){window.gapi.load("client",{callback:e,onerror:t})}));case 4:return e.next=6,window.gapi.client.init({});case 6:return e.next=8,i;case 8:return e.next=10,new Promise((function(e,t){try{a=window.google.accounts.oauth2.initTokenClient({client_id:"577256234296-krnknsj2vflrk1vagg05aorhsj9pugh3.apps.googleusercontent.com",scope:"https://www.googleapis.com/auth/analytics.readonly",prompt:"consent",callback:""}),e()}catch(n){t(n)}}));case 10:u();case 11:case"end":return e.stop()}}),e)})))();var o=document.createElement("script");o.src="https://apis.google.com/js/api.js",o.async=!0,o.defer=!0,o.onload=e,o.onerror=n;var s=document.createElement("script");s.src="https://accounts.google.com/gsi/client",s.async=!0,s.defer=!0,s.onload=c,s.onerror=l,document.body.appendChild(o),document.body.appendChild(s)}}),[t]),r};a(226);var I=Object(d.b)((function(e){return{user:e.user}}),(function(e){return Object(u.b)({},e)}))((function(e){var t=e.adAccountId,a=e.user,l=Object(n.useState)(!0),r=Object(s.a)(l,2),i=r[0],d=r[1],u="lead",p=Object(n.useState)(u),f=Object(s.a)(p,2),b=f[0],v=f[1],g=60*(new Date).getTimezoneOffset()*1e3,E=(new Date).getTime()-g-7776e6,_=(new Date).getTime()-g,y=new Date(E).toISOString().split("T")[0],N=new Date(_).toISOString().split("T")[0],j=Object(n.useState)(y),w=Object(s.a)(j,2),x=w[0],k=w[1],T=Object(n.useState)(N),C=Object(s.a)(T,2),I=C[0],F=C[1],B=Object(n.useState)(1),M=Object(s.a)(B,2),P=M[0],z=M[1],H=Object(S.a)({name:"",platformId:"",projectId:"",data:[],dateArray:[],leadSpendTotal:0,leadSpendDaily:[],leadTotal:0,leadDaily:[],costPerLeadDaily:[],preLaunchSpendTotal:0,preLaunchSpendDaily:[],fundRaisingSpendTotal:0,fundRaisingSpendDaily:[],adsDirectFundRaisingTotal:0,adsDirectFundRaisingDaily:[],adsDirectRoasDaily:[],fundRaisingTotal:0,fundRaisingDaily:[],orderCountTotal:0,orderCountDaily:[],totalRoasDaily:[],brewData:{adsDirectRoasDaily:[]}}),U=Object(s.a)(H,2),G=U[0],J=U[1],W=Object(S.a)({started_at:void 0,fundRaisingDateMap:void 0,orderCountDateMap:void 0}),V=Object(s.a)(W,2),q=V[0],Y=V[1],$=Object(S.a)({}),K=Object(s.a)($,2),Q=K[0],X=K[1],Z=Object(n.useCallback)(function(e,t,a){var n;return function(){var c=this,l=arguments,r=function(){n=null,a||e.apply(c,l)},i=a&&!n;clearTimeout(n),n=setTimeout(r,t),i&&e.apply(c,l)}}((function(e,a){!function(e,a){fetch("https://drip-plugin.crowdfunding.coffee/api/comment/insert",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adAccountId:t,date:a,comment:e})})}(e,a)}),600),[]),ee=Object(S.a)(!1),te=Object(s.a)(ee,2),ae=te[0],ne=te[1],ce=Object(S.a)({isOpen:!1,totalOrderCount:0,totalOrderSum:0,orderStatsDaily:[],dateArray:[],dateToOrderSum:{}}),le=Object(s.a)(ce,2),re=le[0],ie=le[1],oe={maintainAspectRatio:!1,elements:{line:{tension:0,borderWidth:2},point:{radius:0}},hover:{intersect:!1},tooltips:{mode:"index",intersect:!1}},se={labels:void 0!==q.projectStartIndex?-1===q.projectStartIndex?Object(o.a)(G.dateArray).reverse():Object(o.a)(G.dateArray).reverse().slice(q.projectStartIndex):[],datasets:[{label:"\u7e3d\u9ad4 ROAS",fill:!1,borderColor:"#1060AB",pointBackgroundColor:"#1060AB",pointHoverBackgroundColor:"#1060AB",datalabels:{color:"#1060AB",align:"top",offset:8},data:void 0!==q.projectStartIndex?-1===q.projectStartIndex?Object(o.a)(G.totalRoasDaily).reverse():Object(o.a)(G.totalRoasDaily).reverse().slice(q.projectStartIndex):[]},{label:"\u5ee3\u544a ROAS",fill:!1,borderColor:"#1FA3EE",pointBackgroundColor:"#1FA3EE",pointHoverBackgroundColor:"#1FA3EE",datalabels:{color:"#1FA3EE",align:"bottom",offset:8},data:void 0!==q.projectStartIndex?-1===q.projectStartIndex?Object(o.a)(G.adsDirectRoasDaily).reverse():Object(o.a)(G.adsDirectRoasDaily).reverse().slice(q.projectStartIndex):[]}]},de=Object(h.a)(Object(h.a)({},oe),{},{scales:{yAxes:[{type:"linear",display:!0,position:"left",scaleLabel:{display:!0,labelString:"ROAS"}}],xAxes:[{ticks:{callback:function(e,t,a){return e.slice(5)}}}]}}),ue={labels:q.projectStartIndex?Object(o.a)(G.dateArray).reverse().slice(0,q.projectStartIndex+1):Object(o.a)(G.dateArray).reverse(),datasets:[{label:"CPL(FB)",fill:!1,borderColor:"#D07D00",pointBackgroundColor:"#D07D00",pointHoverBackgroundColor:"#D07D00",datalabels:{color:"#D07D00",align:"top",offset:8},data:q.projectStartIndex?Object(o.a)(G.costPerLeadDaily).reverse().slice(0,q.projectStartIndex+1):Object(o.a)(G.costPerLeadDaily).reverse()}]},me=Object(h.a)(Object(h.a)({},oe),{},{scales:{yAxes:[{type:"linear",display:!0,position:"left",scaleLabel:{fontColor:"#D07D00",display:!0,labelString:"\u540d\u55ae\u53d6\u5f97\u6210\u672c"}}],xAxes:[{ticks:{callback:function(e,t,a){return e.slice(5)}}}]}}),pe={labels:Object(o.a)(re.dateArray),datasets:[]};if(re.isOpen&&G.brewData.brewAdsSpendTotal){var fe=[],be=[];re.dateArray.forEach((function(e){var t,a,n,c;if(0===(null===(t=G.brewData[e])||void 0===t?void 0:t.spend))return fe.push(null),void be.push(null);fe.push((re.dateToOrderSum[e]/(null===(a=G.brewData[e])||void 0===a?void 0:a.spend)).toFixed(1)),be.push(((null===(n=G.brewData[e])||void 0===n?void 0:n.revenue)/(null===(c=G.brewData[e])||void 0===c?void 0:c.spend)).toFixed(1))})),pe.datasets.push({label:"\u7e3d\u9ad4 ROAS",fill:!1,borderColor:"#21912a",pointBackgroundColor:"#21912a",pointHoverBackgroundColor:"#21912a",datalabels:{color:"#21912a",align:"top",offset:8},data:fe},{label:"\u5ee3\u544a ROAS",fill:!1,borderColor:"#48bf53",pointBackgroundColor:"#48bf53",pointHoverBackgroundColor:"#48bf53",datalabels:{color:"#48bf53",align:"bottom",offset:8},data:be})}var he=Object(h.a)(Object(h.a)({},oe),{},{scales:{yAxes:[{type:"linear",display:!0,position:"left",scaleLabel:{fontColor:"#48bf53",display:!0,labelString:"ROAS"}}],xAxes:[{ticks:{callback:function(e,t,a){return e.slice(5)}}}]}}),ve={lead:"",fundRaising:""},ge=Object(S.a)(ve),Ee=Object(s.a)(ge,2),_e=Ee[0],ye=Ee[1],Ne=[{viewId:_e[u],dateRanges:[{startDate:x,endDate:I}],metrics:[{expression:"ga:goalCompletionsAll"}],dimensions:[{name:"ga:date"}]}],je=Object(n.useState)(0),we=Object(s.a)(je,2),De=we[0],Oe=we[1],xe=L(Ne,De);if(_e[u]&&xe.total&&G.leadSpendDaily.length){var Ae=[];G.dateArray.map((function(e,t){xe[e]?Ae.push((G.leadSpendDaily[t]/xe[e]).toFixed(1)):Ae.push(null)})),ue.datasets.push({label:"CPL(GA)",fill:!1,borderColor:"#f9af0b",pointBackgroundColor:"#f9af0b",pointHoverBackgroundColor:"#f9af0b",datalabels:{color:"#f9af0b",align:"top",offset:8},data:q.projectStartIndex?[].concat(Ae).reverse().slice(0,q.projectStartIndex+1):[].concat(Ae).reverse()})}var Se=[{viewId:_e.fundRaising,dateRanges:[{startDate:x,endDate:I}],metrics:[{expression:"ga:transactionRevenue"}],dimensions:[{name:"ga:date"}]}],Re=Object(n.useState)(0),ke=Object(s.a)(Re,2),Te=ke[0],Ce=ke[1],Le=L(Se,Te);return Object(n.useEffect)((function(){x>=I?alert("\u958b\u59cb\u6642\u9593\u5fc5\u9808\u5c0f\u65bc\u7d50\u675f\u6642\u9593"):(fetch("https://syphon-api.crowdfunding.coffee/ad-account/info/".concat(t)).then((function(e){return e.json()})).then((function(e){J((function(t){t.name=e.name,t.platformId=e.business_street,t.projectId=e.business_street2}))})),d(!0),fetch("https://syphon-api.crowdfunding.coffee/ad-account/insights/".concat(t,"?timeRangeSince=").concat(x,"&timeRangeUntil=").concat(I)).then((function(e){return e.json()})).then((function(e){console.log(e),e.data?J((function(t){t.data=function(e){var t={};return e.forEach((function(e){var a=e.date_start,n=function(e){return e.campaign_name.includes("\u9810\u71b1")?"\u9810\u71b1":e.campaign_name.includes("\u524d\u6e2c")?"\u524d\u6e2c":e.campaign_name.includes("\u4e0a\u7dda")?"\u4e0a\u7dda":e.campaign_name.toLowerCase().includes("brew")?"BREW":"none"}(e);t[a]?t[a][n]?t[a][n].push(e):t[a][n]=[e]:t[a]=Object(A.a)({},n,[e]),t[a].date=a})),console.log("dataMart:",t),t}(e.data)})):J((function(e){e.data={}})),d(!1)})),fetch("https://beans-logistics.crowdfunding.coffee/openapi/syphon.php?act=".concat(t.slice(4),"&start=").concat(x,"&end=").concat(I)).then((function(e){return e.json()})).then((function(e){if(e.length>0){var t={},a=0;e.forEach((function(e){var n=e.date_time,c=e.order_audience;a+=c,t[m(n).toDate()]=c})),ne((function(e){return t})),J((function(e){e.chatbotTotal=a}))}else ne((function(e){return!1})),J((function(e){e.chatbotTotal=0}))})).catch((function(e){console.error(e),ne((function(e){return!1})),J((function(e){e.chatbotTotal=0}))})),fetch("https://brew-logistics.crowdfunding.coffee/openapi/syphon_preorder.php?act=".concat(t.slice(4),"&start=").concat(x,"&end=").concat(I)).then((function(e){return e.json()})).then((function(e){if(e.length>0){var t=[],a=0,n=0,c=[],l={};e.forEach((function(e){var r=e.date_time,i=e.order_sum,o=e.order_count;n+=i,a+=o,t.push({date:m(r).toDate(),orderSum:i,orderCount:o}),c.push(m(r).toDate()),l[m(r).toDate()]=i})),t=t.reverse(),ie((function(e){return{isOpen:!0,orderStatsDaily:t,totalOrderCount:a,totalOrderSum:n,dateArray:c,dateToOrderSum:l}}))}})).catch((function(e){console.error(e),ie((function(e){e.isOpen=!1}))})))}),[t,J,P]),Object(n.useEffect)((function(){!function(){var e=Object.keys(G.data),t=0,a=[],n=0,c=[],l=[],r=0,i=[],o=0,s=[],d=0,u=[],m=[],p={brewAdsSpendTotal:0,brewAdsRevenueTotal:0};Object.values(G.data).forEach((function(e){if(e["\u9810\u71b1"]){var f=e["\u9810\u71b1"],b=0;f.forEach((function(e){if(0!==parseInt(e.spend)){var t=parseInt(e.spend);b+=t}})),0!==b?(r+=b,i.push(b)):i.push(null)}else i.push(null);if(e["\u524d\u6e2c"]){var h=e["\u524d\u6e2c"],v=0,g=0;h.forEach((function(e){if(0!==parseInt(e.spend)&&e.actions){var t=parseInt(e.spend),a=e.actions.find((function(t){return e.campaign_name.toLowerCase().includes("surveycake")?t.action_type.startsWith("offsite_conversion.custom."):"offsite_conversion.fb_pixel_custom"===t.action_type||"lead"===t.action_type|"offsite_conversion.fb_pixel_complete_registration"===t.action_type}));v+=t,g+=a?parseInt(a.value):0}})),0!==v&&0!==g?(t+=v,a.push(v),n+=g,c.push(g),l.push((v/g).toFixed(1))):(a.push(null),c.push(null),l.push(null))}else a.push(null),c.push(null),l.push(null);if(e["\u4e0a\u7dda"]){var E=e["\u4e0a\u7dda"],_=0,y=0;E.forEach((function(e){if(0!==parseInt(e.spend)){var t=parseInt(e.spend),a=e.action_values&&e.action_values.find((function(e){return"omni_purchase"===e.action_type}));_+=t,y+=a?parseInt(a.value):0}})),0!==_?(o+=_,s.push(_),d+=y,u.push(y),m.push((y/_).toFixed(1))):(s.push(null),u.push(null),m.push(null))}else s.push(null),u.push(null),m.push(null);if(e.BREW){var N=e.BREW,j=0,w=0;N.forEach((function(e){if(0!==parseInt(e.spend)){var t=parseInt(e.spend),a=e.action_values&&e.action_values.find((function(e){return"omni_purchase"===e.action_type}));j+=t,w+=a?parseInt(a.value):0}})),p[e.date]={spend:j,revenue:w},p.brewAdsSpendTotal+=j,p.brewAdsRevenueTotal+=w}})),J((function(f){f.dateArray=e,f.leadSpendTotal=t,f.leadSpendDaily=a,f.leadTotal=n,f.leadDaily=c,f.costPerLeadDaily=l,f.preLaunchSpendTotal=r,f.preLaunchSpendDaily=i,f.fundRaisingSpendTotal=o,f.fundRaisingSpendDaily=s,f.adsDirectFundRaisingTotal=d,f.adsDirectFundRaisingDaily=u,f.adsDirectRoasDaily=m,f.brewData=p}))}()}),[G.data,J]),Object(n.useEffect)((function(){var e=G.platformId,t=G.projectId;e&&t&&function(e,t){fetch("https://drip-plugin.crowdfunding.coffee/api/platform/".concat(e,"/projects/").concat(t)).then((function(e){return e.json()})).then((function(e){Y((function(t){var a=JSON.parse(e.timeline);if(e.customize_timeline){var n=JSON.parse(e.customize_timeline);a.push.apply(a,Object(o.a)(n))}return Object(h.a)(Object(h.a)(Object(h.a)({},t),e),{},{timeline:a.sort((function(e,t){return e[0]-t[0]})),sponsor_count:m(e.sponsor_count).toNumber(),funding_target:m(e.funding_target).toDollar(),funding_current:m(e.funding_current).toDollar(),started_at:m(e.started_at).toProjectTime(),finished_at:m(e.finished_at).toProjectTime()})}))}))}(e,t)}),[G.platformId,G.projectId,Y]),Object(n.useEffect)((function(){if(q.timeline){var e=q.started_at.slice(0,10),t=Object(o.a)(G.dateArray).reverse().findIndex((function(t){return t===e})),a=new Date(q.started_at.slice(0,-1)).getTime()/1e3,n=new Date(q.finished_at.slice(0,-1)).getTime()/1e3;a-=3600;var c={};q.timeline.forEach((function(e){if(!(e[0]<a||e[0]>n)){var t=m(1e3*e[0]).toDate(),l=[m(1e3*e[0]).toTime(),e[1],e[2]];c[t]?c[t].push(l):c[t]=[l]}}));for(var l={},r={},i=0,d=0,u=0,p=Object.entries(c);u<p.length;u++){var f=Object(s.a)(p[u],2),b=f[0],h=f[1],v=h[h.length-1][2],g=h[h.length-1][1];l[b]=v-i,r[b]=g-d,i=v,d=g}Y((function(e){e.fundRaisingDateMap=l,e.orderCountDateMap=r,e.projectStartIndex=t}))}}),[q.timeline,q.started_at,q.finished_at,Y,G.dateArray]),Object(n.useEffect)((function(){if(q.fundRaisingDateMap&&G.fundRaisingSpendDaily.length>0){var e=0,t=[],a=0,n=[],c=[];G.dateArray.forEach((function(l,r){e+=q.fundRaisingDateMap[l]?q.fundRaisingDateMap[l]:0,t.push(q.fundRaisingDateMap[l]),a+=q.orderCountDateMap[l]?q.orderCountDateMap[l]:0,n.push(q.orderCountDateMap[l]),q.fundRaisingDateMap[l]&&G.fundRaisingSpendDaily[r]?c.push((q.fundRaisingDateMap[l]/G.fundRaisingSpendDaily[r]).toFixed(1)):c.push(0)})),J((function(l){l.fundRaisingTotal=e,l.fundRaisingDaily=t,l.orderCountTotal=a,l.orderCountDaily=n,l.totalRoasDaily=c}))}}),[q.fundRaisingDateMap,q.orderCountDateMap,G.fundRaisingSpendDaily,G.dateArray,J]),Object(n.useEffect)((function(){q.id&&v("fundRaising")}),[q.id]),Object(n.useEffect)((function(){fetch("https://drip-plugin.crowdfunding.coffee/api/adAccountId/".concat(t,"/comment/")).then((function(e){return e.json()})).then((function(e){var t={};e.forEach((function(e){var a=e.date,n=e.comment;t[a]=n})),X((function(e){return t}))}))}),[t]),Object(n.useEffect)((function(){!function(){for(var e=document.getElementsByTagName("textarea"),t=0;t<e.length;t++)e[t].setAttribute("style","height:"+e[t].scrollHeight+"px;overflow-y:hidden;"),e[t].addEventListener("input",a,!1);function a(){this.style.height="auto",this.style.height=this.scrollHeight+"px"}}()}),[a.isLogin,G]),Object(n.useEffect)((function(){fetch("https://drip-plugin.crowdfunding.coffee/api/adAccountId/".concat(t,"/ga-viewId")).then((function(e){return e.json()})).then((function(e){e.length>0&&(e.forEach((function(e){var t=e.topic,a=e.viewId;ye((function(e){e[t]=a}))})),Oe((function(e){return e+1})),Ce((function(e){return e+1})))}))}),[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3"},c.a.createElement(D,{title:G.name})),i?c.a.createElement("div",{className:"text-center my-5"},c.a.createElement("div",{className:"spinner-border text-primary",role:"status"},c.a.createElement("span",{className:"sr-only"},"Loading..."))):c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row time-range"},c.a.createElement("div",{className:"col-sm-12 col-md-2 time-range__title"},"\u8cc7\u6599\u9078\u53d6\u7bc4\u570d"),c.a.createElement("div",{className:"col-sm-6 col-md-4 time-picker"},c.a.createElement("label",{htmlFor:"timeRangeSince"},"\u958b\u59cb\u6642\u9593"),c.a.createElement("input",{id:"timeRangeSince",type:"date",value:x,max:N,onChange:function(e){k(e.target.value)}})),c.a.createElement("div",{className:"col-sm-6 col-md-4 time-picker"},c.a.createElement("label",{htmlFor:"timeRangeUntil"},"\u7d50\u675f\u6642\u9593"),c.a.createElement("input",{id:"timeRangeUntil",type:"date",value:I,max:N,onChange:function(e){F(e.target.value)}})),c.a.createElement("div",{className:"col-sm-12 col-md-2 time-range__button"},c.a.createElement("div",{className:"btn btn-primary btn-block m-1",onClick:function(){z((function(e){return e+1}))}},"\u66f4\u65b0")))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row ga-view-id"},c.a.createElement("div",{className:"col-sm-12 col-md-6 ga-view-id-group"},c.a.createElement("label",{htmlFor:"lead-ga-view-id"},"\u524d\u6e2c\u554f\u5377"," ",c.a.createElement("a",{target:"blank",href:"https://keyword-hero.com/documentation/finding-your-view-id-in-google-analytics"},"GA View ID")),c.a.createElement("input",{id:"lead-ga-view-id",value:_e[u],onChange:function(e){e.persist(),ye((function(t){t[u]=e.target.value}))},disabled:!a.isLogin}),c.a.createElement("div",{className:"btn btn-primary btn-sm",onClick:function(){Fe(u,_e[u]),Oe((function(e){return e+1}))}},"\u66f4\u65b0")),c.a.createElement("div",{className:"col-sm-12 col-md-6  ga-view-id-group"},c.a.createElement("label",{htmlFor:"fund-raising-ga-view-id"},"\u5616\u5616"," ",c.a.createElement("a",{target:"blank",href:"https://keyword-hero.com/documentation/finding-your-view-id-in-google-analytics"},"GA View ID")),c.a.createElement("input",{id:"fund-raising-ga-view-id",value:_e.fundRaising,onChange:function(e){e.persist(),ye((function(t){t.fundRaising=e.target.value}))},disabled:!a.isLogin}),c.a.createElement("div",{className:"btn btn-primary btn-sm",onClick:function(){Fe("fundRaising",_e.fundRaising),Ce((function(e){return e+1}))}},"\u66f4\u65b0")))),c.a.createElement("div",{className:"container"},c.a.createElement(O,{project:q,adAccount:G})),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"ad-stats-nav-tabs ".concat(b===u?"ad-stats-nav-tabs--lead":"fundRaising"===b?"ad-stats-nav-tabs--fund-raising":"brew"===b?"ad-stats-nav-tabs--brew":"")},c.a.createElement("div",{className:"tab__item tab__item--lead ".concat(b===u?"active":""),onClick:function(){v(u)}},"\u524d\u6e2c"),q.id&&c.a.createElement("div",{className:"tab__item tab__item--fund-raising ".concat("fundRaising"===b?"active":""),onClick:function(){v("fundRaising")}},"\u4e0a\u7dda"),re.isOpen&&c.a.createElement("div",{className:"tab__item tab__item--brew ".concat("brew"===b?"active":""),onClick:function(){v("brew")}},"Brew"))),q.id&&"fundRaising"===b&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3 line-chart",style:{height:"300px"}},c.a.createElement(R.a,{data:se,options:de})),c.a.createElement("div",{className:"adAccount__table adAccount__table--fund-raising"},c.a.createElement("div",{className:"adAccount__table-title"},"\u6bcf\u65e5\u6578\u64da"),c.a.createElement("div",{className:"container table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Date"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u96c6\u8cc7\u91d1\u984d"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u8a02\u55ae\u6578"),c.a.createElement("td",null,"\u4e0a\u7dda\u5ee3\u544a\u82b1\u8cbb"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5\u8f49\u63db\u91d1\u984d"),_e.fundRaising&&c.a.createElement("td",null,"GA \u6536\u76ca"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5 ROAS"),c.a.createElement("td",null,"\u7e3d\u9ad4 ROAS"),a.isLogin&&c.a.createElement("td",{className:"table--hide-in-mobile"},"\u5099\u8a3b")),c.a.createElement("tr",null,c.a.createElement("th",null,"\u7e3d\u8a08"),c.a.createElement("th",{className:"table--hide-in-mobile"},m(G.fundRaisingTotal).toDollar()),c.a.createElement("th",{className:"table--hide-in-mobile"},m(G.orderCountTotal).toNumber()),c.a.createElement("th",null,m(G.fundRaisingSpendTotal).toDollar()),c.a.createElement("th",null,m(G.adsDirectFundRaisingTotal).toDollar()),_e.fundRaising&&c.a.createElement("th",null,m(Le.total).toDollar()),c.a.createElement("th",null,(G.adsDirectFundRaisingTotal/G.fundRaisingSpendTotal).toFixed(1)),c.a.createElement("th",null,(G.fundRaisingTotal/G.fundRaisingSpendTotal).toFixed(1)),a.isLogin&&c.a.createElement("th",{className:"table--hide-in-mobile"}))),c.a.createElement("tbody",null,G.dateArray.map((function(e,t){return t>G.dateArray.length-q.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(t)},c.a.createElement("th",null,e.slice(5)),c.a.createElement("td",{className:"table--hide-in-mobile"},m(G.fundRaisingDaily[t]).toDollar()),c.a.createElement("td",{className:"table--hide-in-mobile"},G.orderCountDaily[t]),c.a.createElement("td",null,m(G.fundRaisingSpendDaily[t]).toDollar()),c.a.createElement("td",null,m(G.adsDirectFundRaisingDaily[t]).toDollar()),_e.fundRaising&&c.a.createElement("td",null,m(Le[e]).toDollar()),c.a.createElement("td",null,G.adsDirectRoasDaily[t]),c.a.createElement("td",null,G.totalRoasDaily[t]),a.isLogin&&c.a.createElement("td",{className:"table--hide-in-mobile",style:{padding:"8px"}},c.a.createElement("textarea",{value:Q[e],className:"form-control form-control-sm",rows:"1",cols:"20","data-date":e,style:{overflowY:"hidden"},onChange:Ie})))})))))))),b===u&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3 line-chart",style:{height:"300px"}},c.a.createElement(R.a,{data:ue,options:me})),c.a.createElement("div",{className:"adAccount__table adAccount__table--lead"},c.a.createElement("div",{className:"adAccount__table-title"},"\u6bcf\u65e5\u6578\u64da"),c.a.createElement("div",{className:"container table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Date"),c.a.createElement("td",null,"\u524d\u6e2c\u82b1\u8cbb"),c.a.createElement("td",null,"\u540d\u55ae\u6578(FB)"),_e[u]&&c.a.createElement("td",null,"\u540d\u55ae\u6578(GA)"),c.a.createElement("td",null,c.a.createElement("abbr",{title:"\u5206\u6bcd\u4ee5 GA \u540d\u55ae\u512a\u5148\uff0c\u6c92\u6709 GA \u8cc7\u6599\u518d\u7528 FB \u540d\u55ae\u6578"},"CPL")),ae&&c.a.createElement("td",{className:"table--hide-in-mobile"},"Chatbot"),ae&&c.a.createElement("td",{title:"\uff08chatbot/\u540d\u55ae\u6578\uff09",className:"table--hide-in-mobile"},"\u8a02\u95b1\u7387"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u9810\u71b1\u82b1\u8cbb"),(a.isLogin||"act_318137636023754"===t)&&c.a.createElement("td",{className:"table--hide-in-mobile"},"\u5099\u8a3b")),c.a.createElement("tr",null,c.a.createElement("th",null,"\u7e3d\u8a08"),c.a.createElement("th",null,m(G.leadSpendTotal).toDollar()),c.a.createElement("th",null,m(G.leadTotal).toNumber()),_e[u]&&c.a.createElement("th",null,m(xe.total).toNumber()),c.a.createElement("th",null,_e[u]&&xe.total?(G.leadSpendTotal/xe.total).toFixed(1):(G.leadSpendTotal/G.leadTotal).toFixed(1)),ae&&c.a.createElement("th",{className:"table--hide-in-mobile"},m(G.chatbotTotal).toNumber()),ae&&c.a.createElement("th",{className:"table--hide-in-mobile"},m((G.chatbotTotal/G.leadTotal).toFixed(3)).toPercentage()),c.a.createElement("th",{className:"table--hide-in-mobile"},m(G.preLaunchSpendTotal).toDollar()),a.isLogin&&c.a.createElement("th",{className:"table--hide-in-mobile"}))),c.a.createElement("tbody",null,G.dateArray.map((function(e,t){return t<G.dateArray.length-q.projectStartIndex-1?null:c.a.createElement("tr",{key:"daily-adAccount-data-".concat(t)},c.a.createElement("th",null,e.slice(5)),c.a.createElement("td",null,m(G.leadSpendDaily[t]).toDollar()),c.a.createElement("td",null,m(G.leadDaily[t]).toNumber()),_e[u]&&c.a.createElement("td",null,m(xe[e]).toNumber()),c.a.createElement("td",null,_e[u]&&xe.total?m((G.leadSpendDaily[t]/xe[e]).toFixed(1)).toDollar():m(G.costPerLeadDaily[t]).toDollar()),ae&&c.a.createElement("td",{className:"table--hide-in-mobile"},m(ae[e]).toNumber()),ae&&c.a.createElement("td",{className:"table--hide-in-mobile"},m((ae[e]?ae[e]/G.leadDaily[t]:0).toFixed(3)).toPercentage()),c.a.createElement("td",{className:"table--hide-in-mobile"},m(G.preLaunchSpendDaily[t]).toDollar()),a.isLogin&&c.a.createElement("td",{className:"table--hide-in-mobile",style:{padding:"8px"}},c.a.createElement("textarea",{value:Q[e],className:"form-control form-control-sm",rows:"1",cols:"20","data-date":e,style:{overflowY:"hidden"},onChange:Ie})))})))))))),"brew"===b&&c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"container my-3 line-chart",style:{height:"300px"}},c.a.createElement(R.a,{data:pe,options:he})),c.a.createElement("div",{className:"adAccount__table adAccount__table--brew"},c.a.createElement("div",{className:"adAccount__table-title"},"\u6bcf\u65e5\u6578\u64da"),c.a.createElement("div",{className:"container table-responsive"},c.a.createElement("div",{className:"tableFixHead"},c.a.createElement("table",{className:"table"},c.a.createElement("thead",null,c.a.createElement("tr",null,c.a.createElement("td",null,"Date"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u96c6\u8cc7\u91d1\u984d"),c.a.createElement("td",{className:"table--hide-in-mobile"},"\u6bcf\u65e5\u8a02\u55ae\u6578"),c.a.createElement("td",null,"\u4e0a\u7dda\u5ee3\u544a\u82b1\u8cbb"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5\u8f49\u63db\u91d1\u984d"),c.a.createElement("td",null,"\u5ee3\u544a\u76f4\u63a5 ROAS"),c.a.createElement("td",null,"\u7e3d\u9ad4 ROAS"),a.isLogin&&c.a.createElement("td",{className:"table--hide-in-mobile"},"\u5099\u8a3b")),c.a.createElement("tr",null,c.a.createElement("th",null,"\u7e3d\u8a08"),c.a.createElement("th",{className:"table--hide-in-mobile"},m(re.totalOrderSum).toDollar()),c.a.createElement("th",{className:"table--hide-in-mobile"},m(re.totalOrderCount).toNumber()),c.a.createElement("th",null,m(G.brewData.brewAdsSpendTotal).toDollar()),c.a.createElement("th",null,m(G.brewData.brewAdsRevenueTotal).toDollar()),c.a.createElement("th",null,(G.brewData.brewAdsRevenueTotal/G.brewData.brewAdsSpendTotal).toFixed(1)),c.a.createElement("th",null,(re.totalOrderSum/G.brewData.brewAdsSpendTotal).toFixed(1)),a.isLogin&&c.a.createElement("th",{className:"table--hide-in-mobile"}))),c.a.createElement("tbody",null,re.orderStatsDaily.map((function(e){var t,n,l,r,i,o=e.date,s=e.orderSum,d=e.orderCount;return c.a.createElement("tr",{key:"daily-adAccount-data-".concat(o)},c.a.createElement("th",null,o.slice(5)),c.a.createElement("td",{className:"table--hide-in-mobile"},m(s).toDollar()),c.a.createElement("td",{className:"table--hide-in-mobile"},d),c.a.createElement("td",null,m(null===(t=G.brewData[o])||void 0===t?void 0:t.spend).toDollar()),c.a.createElement("td",null,m(null===(n=G.brewData[o])||void 0===n?void 0:n.revenue).toDollar()),c.a.createElement("td",null,((null===(l=G.brewData[o])||void 0===l?void 0:l.revenue)/(null===(r=G.brewData[o])||void 0===r?void 0:r.spend)).toFixed(1)),c.a.createElement("td",null,(s/(null===(i=G.brewData[o])||void 0===i?void 0:i.spend)).toFixed(1)),a.isLogin&&c.a.createElement("td",{className:"table--hide-in-mobile",style:{padding:"8px"}},c.a.createElement("textarea",{value:Q[o],className:"form-control form-control-sm",rows:"1",cols:"20","data-date":o,style:{overflowY:"hidden"},onChange:Ie})))}))))))))));function Ie(e){var t=e.target.value,a=e.target.dataset.date;X((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(A.a)({},a,t))})),Z(t,a)}function Fe(e,a){fetch("https://drip-plugin.crowdfunding.coffee/api/ga-viewId/create-or-update",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({adAccountId:t,topic:e,viewId:a})})}})),F=function(){return c.a.createElement(i.a,{basepath:"/",primary:!1},c.a.createElement(x,{path:"/"}),c.a.createElement(I,{path:"/ad-account/:adAccountId"}))},B=Object(u.c)({user:y,adAccounts:w}),M=a(36),P=T.a.mark(H),z=T.a.mark(G);function H(e){var t,a,n;return T.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return e.payload,c.prev=1,c.next=4,Object(M.c)(E({isLoading:!0}));case 4:return c.next=6,Object(M.c)(j({isLoading:!0}));case 6:return c.next=8,Object(M.b)((function(){return new Promise((function(e){window.FB.api("/me?fields=name,picture{url},adaccounts.limit(1000){age,name,amount_spent,campaigns.limit(1000){status,name}}",(function(t){e(t)}))}))}));case 8:if(!(t=c.sent).error){c.next=16;break}return c.next=12,Object(M.c)(E({isNoAuth:!0}));case 12:return c.next=14,Object(M.c)(j({data:[]}));case 14:c.next=22;break;case 16:return a={name:t.name,pictureURL:t.picture.data.url,isLogin:!0},n={data:U(t.adaccounts.data)},c.next=20,Object(M.c)(E(a));case 20:return c.next=22,Object(M.c)(j(n));case 22:return c.next=24,Object(M.c)(E({isLoading:!1}));case 24:return c.next=26,Object(M.c)(j({isLoading:!1}));case 26:c.next=33;break;case 28:return c.prev=28,c.t0=c.catch(1),c.next=32,Object(M.c)(E({isLoading:!1}));case 32:console.log(c.t0);case 33:case"end":return c.stop()}}),P,null,[[1,28]])}function U(e){var t=e.sort((function(e,t){return e.age-t.age}));return t=t.map((function(e){return e.adAccountLive=!1,e.campaignStatus={name:"",value:0},e.campaigns&&e.campaigns.data.forEach((function(t){"ACTIVE"===t.status&&(e.adAccountLive=!0),e.campaignStatus=function(e,t){var a=function(e){return e.includes("\u4e0a\u7dda")?{name:"\u4e0a\u7dda",value:3}:e.includes("\u9810\u71b1")?{name:"\u9810\u71b1",value:2}:e.includes("\u524d\u6e2c")?{name:"\u524d\u6e2c",value:1}:{name:"",value:0}}(t);return a.value>e.value?a:e}(e.campaignStatus,t.name)})),e}))}function G(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.d)(_,H);case 2:case"end":return e.stop()}}),z)}var J=T.a.mark(W);function W(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(M.a)([G()]);case 2:case"end":return e.stop()}}),J)}var V=a(117),q=(a(227),Object(V.a)()),Y=Object(v.a)({reducer:B,middleware:[q]});q.run(W),r.a.render(c.a.createElement(d.a,{store:Y},c.a.createElement(c.a.StrictMode,null,c.a.createElement(F,null))),document.getElementById("root"))}},[[118,1,2]]]);
//# sourceMappingURL=main.b330f4f4.chunk.js.map